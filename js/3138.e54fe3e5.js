"use strict";(self["webpackChunkjust_sell"]=self["webpackChunkjust_sell"]||[]).push([[3138],{2619:function(e,t,a){a.d(t,{Z:function(){return u}});var o=a(3396),l=a(7139);const n=["type","placeholder","name","required","value","disabled"],s=(0,o.aZ)({emits:["update:modelValue","blur"],methods:{input(e){const t=e.target?.value;this.$emit("update:modelValue",t)}}});var r=(0,o.aZ)({...s,__name:"InputField",props:{name:{},type:{},placeholder:{},required:{type:Boolean},size:{default:"lg"},variant:{default:"default"},modelValue:{},disabled:{}},setup(e){return(e,t)=>((0,o.wg)(),(0,o.iD)("input",{type:e.type,placeholder:e.placeholder?e.$t(e.placeholder):"",name:e.name,required:e.required,class:(0,l.C_)([`form-field__input--${e.size} form-field__input--${e.variant}`,"form-field__input"]),value:e.modelValue,disabled:e.disabled,onInput:t[0]||(t[0]=t=>e.input(t)),onBlur:t[1]||(t[1]=t=>e.$emit("blur"))},null,42,n))}});const i=r;var u=i},6931:function(e,t,a){a.d(t,{Z:function(){return h}});var o=a(3396),l=a(7139),n=a(9242);function s(e,t,a,s,r,i){return(0,o.wg)(),(0,o.iD)("form",{class:(0,l.C_)(e.classNames),onSubmit:[t[0]||(t[0]=(0,n.iM)((()=>{}),["prevent"])),t[1]||(t[1]=(0,n.iM)((()=>{}),["stop"])),t[2]||(t[2]=(...t)=>e.onSubmit&&e.onSubmit(...t))]},[(0,o.WI)(e.$slots,"fields",{values:e.values,errors:e.errors,hasErrors:e.hasErrors,validateAt:e.validateAt,ref:"slot"})],34)}var r=a(8086),i=a.n(r);const u=async(e,t)=>{let a={};try{await t.validate(e,{abortEarly:!1}),a={}}catch(o){o.inner.forEach((e=>{const t=e.path,o=e.message;i()(a,t,o)}))}return a},d=async(e,t,a)=>{let o="";try{await a.validateAt(e,t)}catch(l){o=l.message}return o};var c=(0,o.aZ)({emits:["submit"],props:{classNames:{type:String,required:!1},initialValues:{type:Object,required:!0},schema:{required:!1}},data(){return{values:this.initialValues,errors:{}}},computed:{hasErrors(){return Boolean(Object.keys(this.errors).length>0)}},watch:{initialValues(e){this.values=e},errors(e){const t=Object.keys(e)[0],a=document.querySelector(`[name="${t}"]`);if(!a)return;const o=20,l=a.getBoundingClientRect().top-o;window.scrollTo({top:l}),a.focus()}},methods:{async onSubmit(){const e=await this.validate();e&&this.$emit("submit",this.values)},async validate(){return this.schema?(this.errors=await u(this.values,this.schema),Boolean(Object.keys(this.errors).length<=0)):(console.error("Validation schema doen't provided"),!0)},async validateAt(e){if(!this.schema)return console.error("Validation schema doen't provided"),!0;const t=await d(e,this.values,this.schema);i()(this.errors,e,t)}}}),m=a(89);const p=(0,m.Z)(c,[["render",s]]);var h=p},64:function(e,t,a){a.d(t,{Z:function(){return $}});var o=a(3396),l=a(7139);const n={class:"terminal-form__container"},s={class:"form-actions form-actions--fixed"};function r(e,t,a,r,i,u){const d=(0,o.up)("input-field"),c=(0,o.up)("form-field"),m=(0,o.up)("v-map"),p=(0,o.up)("route-prices"),h=(0,o.up)("v-button"),f=(0,o.up)("v-form");return(0,o.wg)(),(0,o.iD)("div",n,[(0,o.Wm)(f,{action:"#",class:"terminal-form","initial-values":e.initialValues,onSubmit:e.onSubmit},{fields:(0,o.w5)((({values:t})=>[(0,o.Wm)(c,{label:"Назва"},{default:(0,o.w5)((()=>[(0,o.Wm)(d,{modelValue:t.name,"onUpdate:modelValue":e=>t.name=e,name:"name",type:"text",placeholder:"Введіть назву маршрута"},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1024),(0,o.Wm)(c,{label:"Держава"},{default:(0,o.w5)((()=>[(0,o.Wm)(d,{modelValue:t.country,"onUpdate:modelValue":e=>t.country=e,name:"name",type:"text",placeholder:"Введіть державу"},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1024),(0,o.Wm)(c,{label:"Місто"},{default:(0,o.w5)((()=>[(0,o.Wm)(d,{modelValue:t.city,"onUpdate:modelValue":e=>t.city=e,name:"name",type:"text",placeholder:"Введіть місто"},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1024),(0,o.Wm)(c,{label:"Вартість проїзду"},{default:(0,o.w5)((()=>[(0,o.Wm)(d,{modelValue:t.cost,"onUpdate:modelValue":e=>t.cost=e,name:"name",type:"text",placeholder:"Введіть вартість проїзду"},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1024),(0,o.Wm)(m,{modelValue:t.places,"onUpdate:modelValue":e=>t.places=e,hasAddressAutocomplete:!0,hasPlaceActions:!0},null,8,["modelValue","onUpdate:modelValue"]),(0,o.Wm)(p,{places:t.places},null,8,["places"]),(0,o._)("div",s,[(0,o.Wm)(h,{type:"submit",loading:e.loading},{text:(0,o.w5)((()=>[(0,o.Uk)((0,l.zw)(e.$t("Додати ТС")),1)])),_:1},8,["loading"])])])),_:1},8,["initial-values","onSubmit"])])}var i=a(4677),u=a(4560),d=a(2619),c=a(4610),m=a(6931),p=a(8004);const h={class:"container"},f={class:"record-item"},v={class:"record-item"},V={class:"record-item"},b=["onClick"];function y(e,t,a,l,n,s){const r=(0,o.up)("select-field"),i=(0,o.up)("input-field"),u=(0,o.up)("form-field");return(0,o.wg)(),(0,o.j4)(u,{label:"Cітка цін"},{default:(0,o.w5)((()=>[(0,o._)("div",h,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(e.records,((a,l)=>((0,o.wg)(),(0,o.iD)("div",{class:"record",key:l},[(0,o._)("div",f,[(0,o.Wm)(r,{options:e.options,hasSearch:!1,inputPlaceholder:"З точки",modelValue:a.from,"onUpdate:modelValue":e=>a.from=e},null,8,["options","modelValue","onUpdate:modelValue"])]),(0,o._)("div",v,[(0,o.Wm)(r,{options:e.options,hasSearch:!1,modelValue:a.to,"onUpdate:modelValue":e=>a.to=e,inputPlaceholder:"По точку"},null,8,["options","modelValue","onUpdate:modelValue"])]),(0,o._)("div",V,[(0,o.Wm)(i,{modelValue:a.cost,"onUpdate:modelValue":e=>a.cost=e,placeholder:"Ціна"},null,8,["modelValue","onUpdate:modelValue"])]),e.canRemove?((0,o.wg)(),(0,o.iD)("div",{key:0,class:"button",onClick:t=>e.remove(l)},"-",8,b)):(0,o.kq)("",!0),e.canAdd&&e.records.length-1===l?((0,o.wg)(),(0,o.iD)("div",{key:1,class:"button",onClick:t[0]||(t[0]=(...t)=>e.add&&e.add(...t))}," + ")):(0,o.kq)("",!0)])))),128))])])),_:1})}a(7658);var _=a(2946),g=(0,o.aZ)({props:["label","values","name","places"],components:{FormField:u.Z,SelectField:_.Z,InputField:d.Z},data(){return{records:[{from:"",to:"",cost:""}],options:[],canAdd:!0,canRemove:!1}},watch:{places:{handler(e){e?.length&&(this.options=e.map((e=>({value:e.name,label:e.name}))))}},"records.length":{handler(e){this.canRemove=e>1},immediate:!0}},methods:{add(){this.records.push({from:"",to:"",cost:""})},remove(e){this.records=this.records.filter(((t,a)=>a!==e))}}}),w=a(89);const Z=(0,w.Z)(g,[["render",y],["__scopeId","data-v-c0e5da42"]]);var U=Z;const k={id:"",route:"",name:"",terminal_num:"",transport_num:"",drive_time:"",notify:[],next_to_date:""};var W=(0,o.aZ)({props:["defaultValues"],emits:["submit"],components:{FormField:u.Z,InputField:d.Z,VButton:c.Z,VForm:m.Z,RoutePrices:U,VMap:p.Z},setup(){const e=(0,i.pm)();return{toast:e}},data(){return{initialValues:this.defaultValues||k}},watch:{defaultValues(e){this.initialValues={...this.initialValues,...e}}},computed:{loading(){return!1}},methods:{onSubmit(e){this.$emit("submit",e)}}});const S=(0,w.Z)(W,[["render",r]]);var $=S},7848:function(e,t,a){a.r(t),a.d(t,{default:function(){return p}});var o=a(3396);function l(e,t,a,l,n,s){const r=(0,o.up)("app-loading"),i=(0,o.up)("route-form"),u=(0,o.up)("app-layout");return(0,o.wg)(),(0,o.j4)(u,null,{appTitle:(0,o.w5)((()=>[(0,o.Uk)("Редагувати маршрут")])),appLoading:(0,o.w5)((()=>[(0,o.Wm)(r,{loading:!1})])),appContent:(0,o.w5)((()=>[e.route?((0,o.wg)(),(0,o.j4)(i,{key:0,onSubmit:e.createTransport,defaultValues:e.route},null,8,["onSubmit","defaultValues"])):(0,o.kq)("",!0)])),_:1})}var n=a(8231),s=a(7863),r=a(64),i=a(5837),u=a(4677),d=(0,o.aZ)({inject:["rules"],components:{AppLayout:n.Z,AppLoading:s.Z,RouteForm:r.Z},data(){return{canEdit:!1}},computed:{loading(){return this.$store.state.routes.loading},route(){return console.log(this.$store.state.routes),this.$store.state.routes.route}},async mounted(){this.$store.dispatch(i.V.GET_ROUTE)},setup(){const e=(0,u.pm)();return{toast:e}},methods:{createTransport(e){this.$store.dispatch(i.V.CREATE_ROUTE,{payload:e,toast:this.toast})}}}),c=a(89);const m=(0,c.Z)(d,[["render",l]]);var p=m}}]);
//# sourceMappingURL=3138.e54fe3e5.js.map
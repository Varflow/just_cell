"use strict";(self["webpackChunkjust_sell"]=self["webpackChunkjust_sell"]||[]).push([[2210],{2729:function(e,t,l){l.d(t,{Z:function(){return h}});var a=l(3396),o=l(7139),i=l(9167);const s=["checked","name","disabled"],n={key:0,for:"#checkbox-field",class:"checkbox-field__label"},r={id:"checkbox-field",class:"checkbox-field__box"},d={key:0,src:i,alt:"Checked"},c={key:0,class:"form-field__error"},u=(0,a.aZ)({emits:["change","update:modelValue"],data(){return{checked:this.$props.modelValue}},computed:{hasError(){return Boolean(this.$props.error)}},watch:{modelValue:{handler(e){this.checked="string"===typeof e?JSON.parse(e):e},immediate:!0}},methods:{check(){this.checked=!this.checked,this.$emit("change",this.checked),this.$emit("update:modelValue",this.checked)}}});var m=(0,a.aZ)({...u,__name:"CheckboxField",props:{name:{},label:{},defaultChecked:{type:Boolean},direction:{default:"right"},variant:{default:"primary"},size:{default:"md"},modelValue:{type:Boolean},disabled:{},error:{},justify:{default:"space-between"}},setup(e){return(e,t)=>((0,a.wg)(),(0,a.iD)(a.HY,null,[(0,a._)("input",{type:"checkbox",class:"checkbox-field__input",checked:e.modelValue||e.checked,name:e.name,disabled:e.disabled},null,8,s),(0,a._)("div",{class:(0,o.C_)(["checkbox-field",{"checkbox-field--checked":e.checked,"checkbox-field--disabled":e.disabled,[`checkbox-field--${e.direction}`]:!0,[`checkbox-field--${e.variant}`]:!0,[`checkbox-field--${e.size}`]:!0}]),style:(0,o.j5)({justifyContent:"space-between"===e.justify?"space-between":"flex-start"}),onClick:t[0]||(t[0]=(...t)=>e.check&&e.check(...t))},[Boolean(e.label)?((0,a.wg)(),(0,a.iD)("label",n,(0,o.zw)(e.$t(e.label)),1)):(0,a.kq)("",!0),(0,a._)("div",r,[e.checked?((0,a.wg)(),(0,a.iD)("img",d)):(0,a.kq)("",!0)])],6),e.hasError?((0,a.wg)(),(0,a.iD)("div",c,(0,o.zw)(e.error),1)):(0,a.kq)("",!0)],64))}});const p=m;var h=p},4892:function(e,t,l){l.d(t,{Z:function(){return c}});var a=l(3396);const o={class:"schedule-field"};function i(e,t,l,i,s,n){const r=(0,a.up)("checkbox-field");return(0,a.wg)(),(0,a.iD)("div",o,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(e.days,(t=>((0,a.wg)(),(0,a.j4)(r,{key:t.value,label:t.label,name:e.name,direction:"left",modelValue:e.selected[t.value],"onUpdate:modelValue":l=>e.selected[t.value]=l,onChange:l=>e.onChange(t.value,l)},null,8,["label","name","modelValue","onUpdate:modelValue","onChange"])))),128))])}var s=l(2729),n=(0,a.aZ)({emits:["update:modelValue"],props:["name","modelValue"],components:{CheckboxField:s.Z},setup(){const e="0",t=[{label:"Пн",value:"1"},{label:"Вт",value:"2"},{label:"Ср",value:"3"},{label:"Чт",value:"4"},{label:"Пт",value:"5"},{label:"Сб",value:"6"},{label:"Нд",value:"7"},{label:"Усі дні",value:e}];return{days:t,ALL_DAYS:e}},data(){return{selected:this.modelValue||{},values:this.modelValue||{}}},watch:{values(e){this.$emit("update:modelValue",e)}},methods:{onChange(e,t){if(e===this.ALL_DAYS)return this.selected=this.days.reduce(((e,l)=>(e[l.value]=t,e)),{}),void(this.values=0);this.selected[this.ALL_DAYS]=!1,this.selected[e]=t,this.values=Object.keys(this.selected).filter((e=>this.selected[e]))}}}),r=l(89);const d=(0,r.Z)(n,[["render",i]]);var c=d},8503:function(e,t,l){l.d(t,{Z:function(){return m}});var a=l(3396),o=l(7139),i=l(2729);const s={class:"select-field__item-value"},n={class:"select-field__item-content"},r={class:"select-field__item-hint"},d=(0,a.aZ)({emits:["select"],components:{CheckboxField:i.Z},data(){return{selected:this.checked}},watch:{checked:{handler(e){this.selected=e},immediate:!0}}});var c=(0,a.aZ)({...d,__name:"OptionItemWithCheckbox",props:{option:{},checked:{type:Boolean}},setup(e){return(e,t)=>((0,a.wg)(),(0,a.iD)("div",{class:"select-field__item",onClick:t[1]||(t[1]=t=>e.$emit("select",e.option))},[(0,a._)("div",s,[(0,a.Wm)(i.Z,{name:"",modelValue:e.selected,"onUpdate:modelValue":t[0]||(t[0]=t=>e.selected=t),label:e.option.label,direction:"left",size:"sm"},null,8,["modelValue","label"]),(0,a._)("div",n,[(0,a._)("span",r,(0,o.zw)(e.option.hint),1)])])]))}});const u=c;var m=u},5071:function(e,t,l){l.d(t,{Z:function(){return h}});var a=l(3396),o=l(7139),i=l(9242),s=l(5572),n=l(8445),r=l(8503);const d=["name"],c={class:"select-field__dropdown"},u=(0,a.aZ)({emits:["update:modelValue"],components:{SearchInput:s.Z,SelectedInput:n.Z,OptionItem:r.Z},data(){return{opened:!1,value:this.modelValue||"",selectedLabel:"",selected:[]}},mounted(){document.addEventListener("keydown",this.onEscapePressed)},beforeUnmount(){document.removeEventListener("keydown",this.onEscapePressed)},watch:{selected(){this.value=this.selected?.label||""},options(){this.selectedLabel=this.setSelectedLabel(this.modelValue)},modelValue:{handler(e){this.selectedLabel=this.setSelectedLabel(e)},immediate:!0}},methods:{open(){this.opened=!0},toggle(){this.opened=!this.opened},close(){this.opened=!1},select(e){this.selected.some((t=>e.value===t))?this.selected=this.selected.filter((t=>t!=e.value)):this.selected=[...this.selected,e.value],this.selectedLabel=this.setSelectedLabel(this.selected),this.$emit("update:modelValue",this.selected)},clear(){this.value=""},onEscapePressed(e){"Escape"===e.key&&this.close()},setSelectedLabel(e=[]){if(!e)return"";const t=Array.isArray(e)?e:[e],l=this.options.filter((({value:e})=>t.some((t=>t==e)))).map((e=>e.label));return l.join(",")}}});var m=(0,a.aZ)({...u,__name:"SelectFieldMultiple",props:{name:{},options:{},inputPlaceholder:{},searchPlaceholder:{},hasSearch:{type:Boolean,default:!0},modelValue:{},disabled:{},size:{default:"md"}},setup(e){return(e,t)=>{const l=(0,a.Q2)("click-outside");return(0,a.wy)(((0,a.wg)(),(0,a.iD)("div",{class:(0,o.C_)(["select-field",{"select-field--active":e.opened,"select-field--disabled":e.disabled}]),ref:"selectField"},[(0,a._)("input",{type:"text",name:e.name,class:"select-input-hidden"},null,8,d),(0,a._)("div",{class:(0,o.C_)(["select-field__container form-field__input",`form-field__input--${e.size}`]),onClick:t[0]||(t[0]=t=>e.hasSearch?e.open():e.toggle())},[(0,a.wy)((0,a.Wm)(n.Z,{label:e.selectedLabel,placeholder:e.$t(e.inputPlaceholder||"Select")},null,8,["label","placeholder"]),[[i.F8,!e.hasSearch||!e.opened]]),(0,a.wy)((0,a.Wm)(s.Z,{placeholder:e.$t(e.searchPlaceholder||"Search"),onClear:e.clear,name:e.name},null,8,["placeholder","onClear","name"]),[[i.F8,e.opened&&e.hasSearch]])],2),(0,a._)("div",c,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(e.options,(t=>((0,a.wg)(),(0,a.j4)(r.Z,{key:t.value,option:t,checked:e.selected?.some((e=>e.value==t.value)),onSelect:e.select},null,8,["option","checked","onSelect"])))),128))])],2)),[[l,e.close]])}}});const p=m;var h=p},6842:function(e,t,l){l.d(t,{Z:function(){return x}});var a=l(3396),o=l(9242),i=l(7139),s=l.p+"img/chevron-top.161f73c2.svg",n=l.p+"img/chevron-bottom.4aa9eec8.svg";const r={class:"timepicker",ref:"timepicker"},d={class:"timepicker-dropdown__title"},c={class:"timepicker-dropdown__row"},u={class:"timepicker-dropdown__values"},m=(0,a._)("img",{src:s,alt:"Top",class:"timepicker-dropdown__icon"},null,-1),p=[m],h={class:"timepicker-dropdown__value"},v=(0,a._)("img",{src:n,alt:"Bottom",class:"timepicker-dropdown__icon"},null,-1),f=[v],_=(0,a._)("div",{class:"timepicker-dropdown__delimetr"},":",-1),b={class:"timepicker-dropdown__values"},k={class:"timepicker-dropdown__value"};function V(e,t,l,m,v,V){const w=(0,a.up)("form-field"),g=(0,a.Q2)("click-outside");return(0,a.wg)(),(0,a.j4)(w,{label:e.label},{default:(0,a.w5)((()=>[(0,a.wy)(((0,a.wg)(),(0,a.iD)("div",r,[(0,a._)("div",{class:"timepicker-field",onClick:t[1]||(t[1]=(...t)=>e.toggle&&e.toggle(...t))},[(0,a.wy)((0,a._)("input",{type:"text",name:"time",class:"timepicker-field__input","onUpdate:modelValue":t[0]||(t[0]=t=>e.time=t),readonly:""},null,512),[[o.nr,e.time]])]),(0,a._)("div",{class:(0,i.C_)(["timepicker-dropdown",{opened:e.opened}])},[(0,a._)("h4",d,(0,i.zw)(e.$t("Оберіть час")),1),(0,a._)("div",c,[(0,a._)("div",u,[(0,a._)("div",{class:"timepicker-dropdown__icon",onClick:t[2]||(t[2]=t=>e.increment("hour"))},p),(0,a._)("div",h,(0,i.zw)(e.formattedHour),1),(0,a._)("div",{class:"timepicker-dropdown__icon",onClick:t[3]||(t[3]=t=>e.decrement("hour"))},f)]),_,(0,a._)("div",b,[(0,a._)("img",{src:s,alt:"Top",class:"timepicker-dropdown__icon",onClick:t[4]||(t[4]=t=>e.increment("minuts"))}),(0,a._)("div",k,(0,i.zw)(e.formattedMinuts),1),(0,a._)("img",{src:n,alt:"Bottom",class:"timepicker-dropdown__icon",onClick:t[5]||(t[5]=t=>e.decrement("minuts"))})])])],2)])),[[g,e.close]])])),_:1},8,["label"])}var w=l(4560);const g=23,y=58,Z=e=>e<9?`0${e+1}`:`${e+1}`;var S=(0,a.aZ)({emits:["update:modelValue"],props:["modelValue","label"],components:{FormField:w.Z},data(){return{opened:!1,hour:0,minuts:0,time:"00:00"}},computed:{formattedHour(){return Z(this.hour)},formattedMinuts(){return Z(this.minuts)}},watch:{hour(){this.time=this.formattedHour+":"+this.formattedMinuts,this.$emit("update:modelValue",this.time)},minuts(){this.time=this.formattedHour+":"+this.formattedMinuts,this.$emit("update:modelValue",this.time)}},methods:{increment(e){const t=this[e],l="hour"===e&&t<g,a="minuts"===e&&t<y;(l||a)&&(this[e]=t+1)},decrement(e){const t=this[e];t>0&&(this[e]=t-1)},toggle(){this.opened=!this.opened},close(){this.opened=!1}}}),C=l(89);const $=(0,C.Z)(S,[["render",V]]);var x=$},9694:function(e,t,l){l.d(t,{Z:function(){return u}});var a=l(3396);const o={class:"timepicker-range-field"},i=(0,a._)("div",{class:"timepicker-range__delimetr"},"-",-1);function s(e,t,l,s,n,r){const d=(0,a.up)("timepicker-field");return(0,a.wg)(),(0,a.iD)("div",o,[(0,a.Wm)(d,{label:l.labelFrom},null,8,["label"]),i,(0,a.Wm)(d,{label:l.labelTo},null,8,["label"])])}var n=l(6842),r={props:["labelFrom","labelTo"],components:{TimepickerField:n.Z}},d=l(89);const c=(0,d.Z)(r,[["render",s]]);var u=c},6931:function(e,t,l){l.d(t,{Z:function(){return h}});var a=l(3396),o=l(7139),i=l(9242);function s(e,t,l,s,n,r){return(0,a.wg)(),(0,a.iD)("form",{class:(0,o.C_)(e.classNames),onSubmit:[t[0]||(t[0]=(0,i.iM)((()=>{}),["prevent"])),t[1]||(t[1]=(0,i.iM)((()=>{}),["stop"])),t[2]||(t[2]=(...t)=>e.onSubmit&&e.onSubmit(...t))]},[(0,a.WI)(e.$slots,"fields",{values:e.values,errors:e.errors,hasErrors:e.hasErrors,validateAt:e.validateAt,ref:"slot"})],34)}var n=l(8086),r=l.n(n);const d=async(e,t)=>{let l={};try{await t.validate(e,{abortEarly:!1}),l={}}catch(a){a.inner.forEach((e=>{const t=e.path,a=e.message;r()(l,t,a)}))}return l},c=async(e,t,l)=>{let a="";try{await l.validateAt(e,t)}catch(o){a=o.message}return a};var u=(0,a.aZ)({emits:["submit"],props:{classNames:{type:String,required:!1},initialValues:{type:Object,required:!0},schema:{required:!1}},data(){return{values:this.initialValues,errors:{}}},computed:{hasErrors(){return Boolean(Object.keys(this.errors).length>0)}},watch:{initialValues(e){this.values=e},errors(e){const t=Object.keys(e)[0],l=document.querySelector(`[name="${t}"]`);if(!l)return;const a=20,o=l.getBoundingClientRect().top-a;window.scrollTo({top:o}),l.focus()}},methods:{async onSubmit(){const e=await this.validate();e&&this.$emit("submit",this.values)},async validate(){return this.schema?(this.errors=await d(this.values,this.schema),Boolean(Object.keys(this.errors).length<=0)):(console.error("Validation schema doen't provided"),!0)},async validateAt(e){if(!this.schema)return console.error("Validation schema doen't provided"),!0;const t=await c(e,this.values,this.schema);r()(this.errors,e,t)}}}),m=l(89);const p=(0,m.Z)(u,[["render",s]]);var h=p},1118:function(e,t,l){l.d(t,{Z:function(){return c}});var a=l(3396);function o(e,t,l,o,i,s){const n=(0,a.up)("select-field"),r=(0,a.up)("form-field");return(0,a.wg)(),(0,a.j4)(r,{label:e.label||"Термінали на які не поширюється знижка",error:e.error},{default:(0,a.w5)((()=>[(0,a.Wm)(n,{options:e.terminals,name:"terminal","input-placeholder":"Оберіть термінал","search-placeholder":"Введіть назву терміналу","has-searh":"","model-value":e.modelValue,"onUpdate:modelValue":e.select},null,8,["options","model-value","onUpdate:modelValue"])])),_:1},8,["label","error"])}var i=l(4560),s=l(5071),n=(0,a.aZ)({props:{modelValue:String,error:String,label:{type:String,required:!1}},emits:["update:modelValue"],components:{FormField:i.Z,SelectField:s.Z},computed:{terminals(){return[{value:"1",label:"Terminal 1"},{value:"2",label:"Terminal 2"}]}},methods:{select(e){this.$emit("update:modelValue",e)}}}),r=l(89);const d=(0,r.Z)(n,[["render",o]]);var c=d},808:function(e,t,l){l.r(t),l.d(t,{default:function(){return D}});var a=l(3396),o=l(7139);function i(e,t,l,i,s,n){const r=(0,a.up)("app-loading"),d=(0,a.up)("transport-form"),c=(0,a.up)("app-layout");return(0,a.wg)(),(0,a.j4)(c,null,{appTitle:(0,a.w5)((()=>[(0,a.Uk)((0,o.zw)(e.$t("Додати ТС")),1)])),appLoading:(0,a.w5)((()=>[(0,a.Wm)(r,{loading:!1})])),appContent:(0,a.w5)((()=>[(0,a.Wm)(d,{onSubmit:e.createTransport},null,8,["onSubmit"])])),_:1})}var s=l(8231),n=l(7863);const r={class:"terminal-form__container"},d={class:"schedule-container"},c={class:"form-actions form-actions--fixed"};function u(e,t,l,i,s,n){const u=(0,a.up)("route-select-field"),m=(0,a.up)("input-field"),p=(0,a.up)("form-field"),h=(0,a.up)("schedule-field"),v=(0,a.up)("timepicker-range"),f=(0,a.up)("terminals-select"),_=(0,a.up)("transport-notify-select"),b=(0,a.up)("datepicker-field"),k=(0,a.up)("v-button"),V=(0,a.up)("v-form");return(0,a.wg)(),(0,a.iD)("div",r,[(0,a.Wm)(V,{action:"#",class:"terminal-form","initial-values":e.initialValues,onSubmit:e.onSubmit},{fields:(0,a.w5)((({values:t})=>[(0,a.Wm)(u,{modelValue:t.route,"onUpdate:modelValue":e=>t.route=e},null,8,["modelValue","onUpdate:modelValue"]),(0,a.Wm)(p,{label:"Назва ТС"},{default:(0,a.w5)((()=>[(0,a.Wm)(m,{modelValue:t.name,"onUpdate:modelValue":e=>t.name=e,name:"name",type:"text",placeholder:"Введіть назву ТС"},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1024),(0,a.Wm)(p,{label:"Державний номер ТС"},{default:(0,a.w5)((()=>[(0,a.Wm)(m,{modelValue:t.transport_num,"onUpdate:modelValue":e=>t.transport_num=e,name:"name",type:"text",placeholder:"Введіть державний номер ТС"},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1024),(0,a.Wm)(p,{label:"Час перебування на маршруті"},{default:(0,a.w5)((()=>[(0,a._)("div",d,[(0,a.Wm)(h,{modelValue:t.drive_time,"onUpdate:modelValue":e=>t.drive_time=e},null,8,["modelValue","onUpdate:modelValue"]),(0,a.Wm)(v,{modelValue:t.drive_time,"onUpdate:modelValue":e=>t.drive_time=e},null,8,["modelValue","onUpdate:modelValue"])])])),_:2},1024),(0,a.Wm)(f,{label:"Валідатор",modelValue:t.terminal_num,"onUpdate:modelValue":e=>t.terminal_num=e},null,8,["modelValue","onUpdate:modelValue"]),(0,a.Wm)(_,{modelValue:t.notify,"onUpdate:modelValue":e=>t.notify=e},null,8,["modelValue","onUpdate:modelValue"]),(0,a.Wm)(p,{label:"Наступний ТО"},{default:(0,a.w5)((()=>[(0,a.Wm)(b,{modelValue:t.next_to_date,"onUpdate:modelValue":e=>t.next_to_date=e},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1024),(0,a._)("div",c,[(0,a.Wm)(k,{type:"submit",loading:e.loading},{text:(0,a.w5)((()=>[(0,a.Uk)((0,o.zw)(e.$t("Додати ТС")),1)])),_:1},8,["loading"])])])),_:1},8,["initial-values","onSubmit"])])}var m=l(4677),p=l(4560),h=l(2619),v=l(4610),f=l(6931),_=l(4892),b=l(9694),k=l(1118);function V(e,t,l,o,i,s){const n=(0,a.up)("select-field-multiple"),r=(0,a.up)("form-field");return(0,a.wg)(),(0,a.j4)(r,{label:"Повідомляти про",error:e.error},{default:(0,a.w5)((()=>[(0,a.Wm)(n,{options:e.notifications,name:"syncTypes","input-placeholder":"Оберіть зі списку","search-placeholder":"Введіть назву маршрута","has-search":!1,"model-value":e.value,"onUpdate:modelValue":e.select},null,8,["options","model-value","onUpdate:modelValue"])])),_:1},8,["error"])}var w=l(5071),g=(0,a.aZ)({props:{modelValue:String,error:String},emits:["update:modelValue"],components:{FormField:p.Z,SelectFieldMultiple:w.Z},data(){return{value:""}},computed:{notifications(){const e=[{label:"Відхилення від маршруту",value:"1"},{label:"Перевищення швидкості",value:"2"},{label:"Тривала зупинка",value:"3"}];return e}},watch:{modelValue:{handler(e){if(Number.isNaN(parseInt(e)))return this.value=this.notifications.find((t=>t.label===e))?.value||"",void this.$emit("update:modelValue",this.value);this.value=e},immediate:!0}},methods:{select(e){this.$emit("update:modelValue",e)}}}),y=l(89);const Z=(0,y.Z)(g,[["render",V]]);var S=Z,C=l(3178),$=l(2028);const x={id:"",route:"",name:"",terminal_num:"",transport_num:"",drive_time:"",notify:[],next_to_date:""};var U=(0,a.aZ)({props:["defaultValues"],emits:["submit"],components:{FormField:p.Z,InputField:h.Z,VButton:v.Z,VForm:f.Z,RouteSelectField:$.pV,ScheduleField:_.Z,TimepickerRange:b.Z,TerminalsSelect:k.Z,TransportNotifySelect:S,DatepickerField:C.Z},setup(){const e=(0,m.pm)();return{toast:e}},data(){return{initialValues:this.defaultValues||x}},watch:{defaultValues(e){this.initialValues={...this.initialValues,...e}}},computed:{loading(){return!1}},methods:{onSubmit(e){this.$emit("submit",e)}}});const F=(0,y.Z)(U,[["render",u]]);var W=F,T=l(5837),L=l(7941),j=(0,a.aZ)({inject:["rules"],components:{AppLayout:s.Z,AppLoading:n.Z,TransportForm:W},data(){return{canEdit:!1}},computed:{loading(){return this.$store.state.transport.loading}},async mounted(){this.$store.dispatch(T.V.GET_ROUTES)},setup(){const e=(0,m.pm)();return{toast:e}},methods:{createTransport(e){this.$store.dispatch(L.K.CREATE_TRANSPORT,{payload:e,toast:this.toast})}}});const E=(0,y.Z)(j,[["render",i]]);var D=E},9167:function(e,t,l){e.exports=l.p+"img/check-icon.972bc3c4.svg"}}]);
//# sourceMappingURL=2210.50288f6a.js.map
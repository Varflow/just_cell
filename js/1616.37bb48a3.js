"use strict";(self["webpackChunkjust_sell"]=self["webpackChunkjust_sell"]||[]).push([[1616],{2375:function(e,a,l){l.d(a,{Cb:function(){return s},oh:function(){return n},zo:function(){return r}});var t=l(7736),o=l(7629);const r=(0,o.Ry)({terminal_id:(0,o.Z_)().required(t.r.REQUIRED_FIELD),can_offline:(0,o.O7)().required(t.r.REQUIRED_FIELD),can_user_reversal:(0,o.O7)().required(t.r.REQUIRED_FIELD),callback_req_type:(0,o.Z_)().required(t.r.REQUIRED_FIELD),callback_type:(0,o.Z_)().required(t.r.REQUIRED_FIELD),inShifts:(0,o.O7)().required(t.r.REQUIRED_FIELD)}),n=(0,o.Ry)({id:(0,o.Z_)().required(t.r.REQUIRED_FIELD),secret_key:(0,o.Z_)().required(t.r.REQUIRED_FIELD)}),s=(0,o.Ry)({secret_key:(0,o.Z_)().required(t.r.REQUIRED_FIELD),req_type:(0,o.Z_)().required(t.r.REQUIRED_FIELD),settings:(0,o.Z_)().required(t.r.REQUIRED_FIELD),sync_type:(0,o.Z_)().required(t.r.REQUIRED_FIELD),max_offline_sum:(0,o.Rx)().required(t.r.REQUIRED_FIELD).min(1,t.r.MIN_NUMBER),endpoint_result:(0,o.Z_)().required(t.r.REQUIRED_FIELD),payload:(0,o.Z_)().required(t.r.REQUIRED_FIELD),sign_stract:(0,o.Z_)().required(t.r.REQUIRED_FIELD),card_wait:(0,o.Rx)().required(t.r.REQUIRED_FIELD).min(1,t.r.MIN_NUMBER),sync_period:(0,o.Rx)().required(t.r.REQUIRED_FIELD).min(1,t.r.MIN_NUMBER)})},9566:function(e,a,l){l.d(a,{Z:function(){return h}});var t=l(3396),o=l(7139),r=l(9242),n=l.p+"img/close-icon.622be15f.svg";const s={class:"modal-header"},i={class:"modal-title"},d=(0,t._)("img",{src:n,alt:"Close"},null,-1),u=[d],m={class:"modal-footer"};function c(e,a,l,n,d,c){return(0,t.wg)(),(0,t.j4)(t.lR,{to:"body"},[(0,t._)("div",{class:(0,o.C_)(["modal",{"modal--opened":e.opened,[`${e.classNames}`]:Boolean(e.classNames)}]),tabindex:"-1",role:"dialog",onClick:a[2]||(a[2]=(...a)=>e.close&&e.close(...a)),ref:"modal"},[(0,t._)("div",{class:"modal-content",style:(0,o.j5)({minWidth:e.minWidth,maxWidth:e.maxWidth,minHeight:e.minHeight,maxHeight:e.maxHeight}),onClick:a[1]||(a[1]=(0,r.iM)((()=>{}),["stop"]))},[(0,t._)("div",s,[(0,t._)("h4",i,[(0,t.WI)(e.$slots,"title")]),e.showCloseButton?((0,t.wg)(),(0,t.iD)("div",{key:0,class:"modal-close-button",onClick:a[0]||(a[0]=(...a)=>e.close&&e.close(...a))},u)):(0,t.kq)("",!0)]),(0,t.WI)(e.$slots,"description"),(0,t.WI)(e.$slots,"content",{close:e.close}),(0,t._)("div",m,[(0,t.WI)(e.$slots,"footer",{close:e.close})])],4)],2)])}var p=(0,t.aZ)({modalController:null,props:{classNames:String,showCloseButton:{type:Boolean,default:!1},minWidth:String,maxWidth:String,minHeight:String,maxHeight:String},data(){return{opened:!1}},mounted(){document.addEventListener("keydown",this.onKeydown)},beforeUnmount(){document.removeEventListener("keydown",this.onKeydown)},methods:{open(){let e,a;const l=new Promise(((l,t)=>{e=l,a=t}));return this.$options.modalController={resolve:e,reject:a},this.opened=!0,l},close(){this.$options.modalController.resolve(!0),this.opened=!1},onKeydown(e){"Escape"===e.key&&this.close()}}}),f=l(89);const _=(0,f.Z)(p,[["render",c]]);var h=_},4795:function(e,a,l){l.d(a,{Z:function(){return E}});var t=l(3396);const o=["type","placeholder","name","required","value"],r={class:"form-field__extra-container"};function n(e,a,l,n,s,i){const d=(0,t.up)("password-visibility-button"),u=(0,t.up)("password-generate-button");return(0,t.wg)(),(0,t.iD)(t.HY,null,[(0,t._)("input",{type:e.type,placeholder:e.placeholder?e.$t(e.placeholder):"",name:e.name,required:e.required,value:e.password,class:"form-field__input",onInput:a[0]||(a[0]=a=>e.input(a)),onBlur:a[1]||(a[1]=a=>e.$emit("blur"))},null,40,o),(0,t._)("div",r,[(0,t.Wm)(d,{onChange:e.changeType},null,8,["onChange"]),e.hasGenerateButton?((0,t.wg)(),(0,t.j4)(u,{key:0,onGeneratedPassword:e.onGeneratePassword},null,8,["onGeneratedPassword"])):(0,t.kq)("",!0)])],64)}var s=l.p+"img/eye_hidden.08669155.svg",i=l.p+"img/eye_visible.cfc84e83.svg";const d={key:0,src:s,alt:"Show\n    password"},u={key:1,src:i,alt:"Show\n    password"};function m(e,a,l,o,r,n){return(0,t.wg)(),(0,t.iD)("button",{type:"button",class:"form-field__extra password-visibility-button",tabindex:"-1",onClick:a[0]||(a[0]=(...a)=>e.changeVisibility&&e.changeVisibility(...a))},[e.visibility?((0,t.wg)(),(0,t.iD)("img",u)):((0,t.wg)(),(0,t.iD)("img",d))])}var c=(0,t.aZ)({emits:["change"],data(){return{visibility:!1}},watch:{visibility(e){const a=e?"text":"password";this.$emit("change",a)}},methods:{changeVisibility(){this.visibility=!this.visibility}}}),p=l(89);const f=(0,p.Z)(c,[["render",m]]);var _=f,h=l.p+"img/key_icon.9e7583e7.svg";const v=(0,t._)("img",{src:h,alt:"Generate"},null,-1),g=[v];function y(e,a,l,o,r,n){return(0,t.wg)(),(0,t.iD)("button",{type:"button",class:"form-field__extra password-visibility-button",tabindex:"-1",onClick:a[0]||(a[0]=(...a)=>e.generatePassword&&e.generatePassword(...a))},g)}var w=(0,t.aZ)({emits:["generatedPassword"],data(){return{generatedPassword:""}},watch:{generatedPassword(e){this.$emit("generatedPassword",e)}},methods:{generatePassword(){const e="0123456789abcdefghijklmnopqrstuvwxyz!@#$%^&*()ABCDEFGHIJKLMNOPQRSTUVWXYZ",a=15;let l="";const t=window.crypto,o=new Uint32Array(1);for(let r=0;r<a;r++){const a=t.getRandomValues(o)[0];l+=e[a%e.length]}this.generatedPassword=l}}});const b=(0,p.Z)(w,[["render",y]]);var V=b,k=(0,t.aZ)({props:{name:{type:String,required:!0},placeholder:{type:String,required:!1},required:{type:Boolean,required:!1},hasGenerateButton:{type:Boolean,default:!1},modelValue:String},emits:["update:modelValue","blur"],components:{PasswordVisibilityButton:_,PasswordGenerateButton:V},data(){return{type:"password",password:this.modelValue||""}},watch:{modelValue(e){this.password=e}},methods:{changeType(e){this.type=e},input(e){const a=e.target?.value;this.$emit("update:modelValue",a)},onGeneratePassword(e){this.$emit("update:modelValue",e)}}});const Z=(0,p.Z)(k,[["render",n]]);var E=Z},3377:function(e,a,l){l.d(a,{Z:function(){return u}});var t=l(3396),o=l(7139);const r={class:"form-title__content"};function n(e,a,l,n,s,i){return(0,t.wg)(),(0,t.iD)("div",{class:(0,o.C_)(["form-title",`form-title--${e.direction}`])},[(0,t._)("div",r,[(0,t.WI)(e.$slots,"title")])],2)}var s=(0,t.aZ)({props:{direction:{type:String,required:!1,default:"bottom"}}}),i=l(89);const d=(0,i.Z)(s,[["render",n]]);var u=d},9983:function(e,a,l){l.d(a,{Z:function(){return m}});var t=l(3396),o=l(9242);const r={class:"tab-pane"};function n(e,a,l,n,s,i){return(0,t.wy)(((0,t.wg)(),(0,t.iD)("div",r,[(0,t.WI)(e.$slots,"default")],512)),[[o.F8,n.isActive]])}var s=l(4870),i={props:["title"],setup(e){const a=(0,s.iH)(!1),l=(0,t.f3)("TabsProvider");return(0,t.YP)((()=>l.selectedIndex),(()=>{a.value=e.title===l.selectedIndex})),(0,t.wF)((()=>{a.value=e.title===l.selectedIndex})),{isActive:a}}},d=l(89);const u=(0,d.Z)(i,[["render",n]]);var m=u},6890:function(e,a,l){l.d(a,{Z:function(){return f}});var t=l(3396),o=l(7139);const r={class:"tabs"},n={class:"tabs-pills"},s=["onClick"],i={class:"tabs-panes"};function d(e,a,l,d,u,m){return(0,t.wg)(),(0,t.iD)("div",r,[(0,t._)("div",n,[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(e.tabs,(a=>((0,t.wg)(),(0,t.iD)("div",{class:(0,o.C_)(["tab-pill",{active:e.selectedIndex===a.props.title}]),key:a.props.title,onClick:l=>e.selectTab(a.props.title)},(0,o.zw)(e.$t(a.props.title)),11,s)))),128))]),(0,t._)("div",i,[(0,t.WI)(e.$slots,"default")])])}var u=l(4870),m=(0,t.aZ)({setup(e,{slots:a,emit:l}){const o=(0,u.qj)({selectedIndex:null,tabs:[],count:0});(0,t.JJ)("TabsProvider",o);const r=e=>{o.selectedIndex=e,l("change",e)},n=()=>{a.default&&(o.tabs=a.default())};return(0,t.wF)((()=>n())),(0,t.Xn)((()=>n())),(0,t.bv)((()=>{r(o.tabs.at(0).props.title)})),{...(0,u.BK)(o),selectTab:r}}}),c=l(89);const p=(0,c.Z)(m,[["render",d]]);var f=p},4887:function(e,a,l){l.d(a,{Z:function(){return u}});var t=l(3396);function o(e,a,l,o,r,n){const s=(0,t.up)("select-field"),i=(0,t.up)("form-field");return(0,t.wg)(),(0,t.j4)(i,{label:e.label||"Тип запиту",error:e.error},{default:(0,t.w5)((()=>[(0,t.Wm)(s,{options:e.types,name:"callback_req_type","input-placeholder":"Оберіть тип запиту","search-placeholder":"Введіть тип запиту","model-value":e.modelValue,"onUpdate:modelValue":e.select,"has-search":!1},null,8,["options","model-value","onUpdate:modelValue"])])),_:1},8,["label","error"])}var r=l(4560),n=l(2946),s=(0,t.aZ)({props:{modelValue:String,label:String,error:String},emits:["update:modelValue"],components:{FormField:r.Z,SelectField:n.Z},data(){return{types:[{value:"json",label:"JSON"},{value:"xml",label:"XML"},{value:"x-www-form",label:"X-WWW-FORM"}]}},methods:{select(e){this.$emit("update:modelValue",e)}}}),i=l(89);const d=(0,i.Z)(s,[["render",o]]);var u=d},5244:function(e,a,l){l.d(a,{Z:function(){return m}});var t=l(3396),o=l(7139);function r(e,a,l,r,n,s){const i=(0,t.up)("select-field"),d=(0,t.up)("form-field");return(0,t.wg)(),(0,t.j4)(d,{label:"Тип налаштування",error:e.error},{hint:(0,t.w5)((()=>[(0,t._)("p",null,(0,o.zw)(e.$t("Інформація щодо налуштування")),1)])),default:(0,t.w5)((()=>[(0,t.Wm)(i,{options:e.settings,name:"settings","input-placeholder":"Оберіть тип налаштування","search-placeholder":"Введіть тип налаштування","has-search":!1,"model-value":e.modelValue,"onUpdate:modelValue":e.select},null,8,["options","model-value","onUpdate:modelValue"])])),_:1},8,["error"])}var n=l(4560),s=l(2946),i=(0,t.aZ)({props:{modelValue:String,error:String},emits:["update:modelValue"],components:{FormField:n.Z,SelectField:s.Z},computed:{settings(){const e=this.$store.state.terminals.terminalsRef;return e?e.offline_settings.map((e=>({value:e.id.toString(),label:e.name||""}))):[]}},methods:{select(e){this.$emit("update:modelValue",e)}}}),d=l(89);const u=(0,d.Z)(i,[["render",r]]);var m=u},5449:function(e,a,l){l.d(a,{Z:function(){return _}});var t=l(3396),o=l(7139);const r={class:"hint-more"},n={class:"hint-more__title"},s=["onClick"];function i(e,a,l,i,d,u){const m=(0,t.up)("textarea-field"),c=(0,t.up)("form-field");return(0,t.wg)(),(0,t.j4)(c,{label:e.label||"Структура підпису (SHA256WithRSA)",error:e.error},{hint:(0,t.w5)((()=>[(0,t._)("div",r,[(0,t._)("div",n,(0,o.zw)(e.$t("Натисніть на потрібний елемент, щоб додати до шаблону")),1),((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(e.hint,(({name:a,message:l})=>((0,t.wg)(),(0,t.iD)("div",{key:a,class:(0,o.C_)(["hint-more__item",{"hint-more__item--selected":e.payload.includes(a)}]),onClick:l=>e.addTemplateElement(a)},[(0,t._)("span",null,(0,o.zw)(a)+" "+(0,o.zw)(l),1)],10,s)))),128)),(0,t._)("div",{class:"hint-more-btn",onClick:a[0]||(a[0]=a=>e.hintOpened=!e.hintOpened)},(0,o.zw)(e.hintOpened?e.$t("Показати меньше"):e.$t("Показати більше")),1)])])),default:(0,t.w5)((()=>[(0,t.Wm)(m,{"model-value":e.modelValue,"onUpdate:modelValue":e.input,"onUpdate:selection":e.changeSelection,name:"sign_stract",placeholder:"Наприклад, ${transaction_id}${pay_time}${get_time}"},null,8,["model-value","onUpdate:modelValue","onUpdate:selection"])])),_:1},8,["label","error"])}var d=l(4560),u=l(6686),m=l(2354),c=(0,t.aZ)({props:{modelValue:String,label:String,error:String},emits:["update:modelValue"],data(){return{payload:"",hintOpened:!1,selectionStart:0,selectionEnd:0,hintMessages:[{name:"${transaction_id}",message:" - ідентифікатор платежу"},{name:"${pay_time}",message:" – час платежу"},{name:"${get_time}",message:" - час отримання"},{name:"${device_id}",message:" – ідентифікатор пристрою"},{name:"${pay_inst}",message:" - идентификатор платежа"},{name:"${pay_mask}",message:" – маска платежу"},{name:"${end_pay_time}",message:" - час закінчення платежу"},{name:"${transaction_type}",message:" – тип транзакції"},{name:"${amount}",message:" – кількість"},{name:"${ticket_num}",message:" – номер квитка"},{name:"${pan_mask}",message:"- маскований номер карти"},{name:"${code}",message:" - код результату транзакції"},{name:"${msg}",message:" - повідомлення коду помилки"},{name:"${rrn}",message:" - інтифікатор в системах МПС"},{name:"${is_test}",message:" - тип транзакції, тестова чи продова"}]}},mounted(){this.modelValue&&(this.payload=this.modelValue)},computed:{hint(){return this.hintOpened?this.hintMessages:this.hintMessages.slice(0,3)}},watch:{payload(e){const a=(0,m.m)(e);this.payload=(0,m.m)(e),this.$emit("update:modelValue",a)}},methods:{input(e){this.payload=e},addTemplateElement(e){this.payload.includes(e)?this.payload=this.payload.replace(e,""):(this.payload.substring(this.selectionEnd,this.payload.length),this.payload=this.payload.substring(0,this.selectionStart)+e+this.payload.substring(this.selectionEnd,this.payload.length)),this.$emit("update:modelValue",this.payload)},changeSelection(e){this.selectionStart=e.start,this.selectionEnd=e.end}},components:{FormField:d.Z,TextareaField:u.Z}}),p=l(89);const f=(0,p.Z)(c,[["render",i]]);var _=f},4886:function(e,a,l){l.d(a,{Z:function(){return m}});var t=l(3396),o=l(7139);function r(e,a,l,r,n,s){const i=(0,t.up)("select-field"),d=(0,t.up)("form-field");return(0,t.wg)(),(0,t.j4)(d,{label:"Тип синхронізації",error:e.error},{hint:(0,t.w5)((()=>[(0,t.Uk)((0,o.zw)(e.$t("Дає змогу налаштувати синхронізацію чорних списків (банківські карти по яким не пройшла оплата) між учасниками системи JustSell")),1)])),default:(0,t.w5)((()=>[(0,t.Wm)(i,{options:e.syncTypes,name:"syncTypes","input-placeholder":"Оберіть тип синхронізації","search-placeholder":"Введіть тип синхронізації","has-search":!1,"model-value":e.modelValue,"onUpdate:modelValue":e.select},null,8,["options","model-value","onUpdate:modelValue"])])),_:1},8,["error"])}var n=l(4560),s=l(2946),i=(0,t.aZ)({props:{modelValue:String,error:String},emits:["update:modelValue"],components:{FormField:n.Z,SelectField:s.Z},computed:{syncTypes(){const e=this.$store.state.terminals.terminalsRef;return e?e.sync_type.map((e=>({value:e.id.toString(),label:e.name||""}))):[]}},methods:{select(e){this.$emit("update:modelValue",e)}}}),d=l(89);const u=(0,d.Z)(i,[["render",r]]);var m=u},7025:function(e,a,l){l.r(a),l.d(a,{default:function(){return De}});var t=l(3396),o=l(7139);function r(e,a,l,r,n,s){const i=(0,t.up)("app-loading"),d=(0,t.up)("terminal-form"),u=(0,t.up)("app-layout");return(0,t.wg)(),(0,t.j4)(u,null,{appTitle:(0,t.w5)((()=>[(0,t.Uk)((0,o.zw)(e.$t("Загальні налаштування терміналу")),1)])),appContent:(0,t.w5)((()=>[(0,t.Wm)(i,{loading:e.loading},null,8,["loading"]),e.loading?(0,t.kq)("",!0):((0,t.wg)(),(0,t.j4)(d,{key:0,"actions-fixed":!0,"config-data":e.configData},null,8,["config-data"]))])),_:1})}var n=l(8231);const s={key:0,class:"terminal-form__container"};function i(e,a,l,r,n,i){const d=(0,t.up)("general-config"),u=(0,t.up)("v-tab"),m=(0,t.up)("add-config-selector"),c=(0,t.up)("add-config"),p=(0,t.up)("v-tabs"),f=(0,t.up)("v-button"),_=(0,t.up)("v-form");return Boolean(this.configData)?((0,t.wg)(),(0,t.iD)("div",s,[(0,t.Wm)(_,{class:"terminal-form",onSubmit:e.sendConfig,schema:e.offlineTerminal,"initial-values":e.initialValues},{fields:(0,t.w5)((({values:a,errors:l})=>[(0,t.Wm)(p,null,{default:(0,t.w5)((()=>[(0,t.Wm)(u,{title:"Загальні налаштвання"},{default:(0,t.w5)((()=>[(0,t.Wm)(d,{"form-values":a,"form-errors":l},null,8,["form-values","form-errors"])])),_:2},1024),(0,t.Wm)(u,{title:"Додадкові налаштування"},{default:(0,t.w5)((()=>[e.hasAddFields?((0,t.wg)(),(0,t.j4)(m,{key:0,"form-values":a,"form-errors":l.add_config},null,8,["form-values","form-errors"])):((0,t.wg)(),(0,t.j4)(c,{key:1,"form-values":{add_config:a.add_config||[],add_data:a.add_data||{}},"form-errors":l.add_config},null,8,["form-values","form-errors"]))])),_:2},1024)])),_:2},1024),(0,t._)("div",{class:(0,o.C_)(["form-actions",{"form-actions--fixed":e.actionsFixed}])},[(0,t.Wm)(f,{type:"submit",loading:e.loading},{text:(0,t.w5)((()=>[(0,t.Uk)("Додати налаштування")])),_:1},8,["loading"])],2)])),_:1},8,["onSubmit","schema","initial-values"])])):(0,t.kq)("",!0)}var d=l(4677),u=l(6931),m=l(9983),c=l(6890),p=l(4610),f=l(5384),_=l(5577),h=l(2375);const v={class:"checkbox-container"},g={class:"checkbox-container"},y={class:"checkbox-container"};function w(e,a,l,r,n,s){const i=(0,t.up)("settings-select"),d=(0,t.up)("checkbox-field"),u=(0,t.up)("form-field"),m=(0,t.up)("input-field"),c=(0,t.up)("password-field"),p=(0,t.up)("form-title"),f=(0,t.up)("textarea-field"),_=(0,t.up)("payload-field"),h=(0,t.up)("sign-stract-field"),w=(0,t.up)("request-method-select"),b=(0,t.up)("request-type-select"),V=(0,t.up)("synctype-select");return(0,t.wg)(),(0,t.iD)(t.HY,null,[(0,t.Wm)(i,{modelValue:e.values.settings,"onUpdate:modelValue":a[0]||(a[0]=a=>e.values.settings=a),error:e.errors.settings},null,8,["modelValue","error"]),(0,t._)("div",v,[(0,t.Wm)(u,null,{hint:(0,t.w5)((()=>[(0,t.Uk)((0,o.zw)(e.$t("У всіх нових терміналах буде дозволена робота в режимі offline")),1)])),default:(0,t.w5)((()=>[(0,t.Wm)(d,{name:"is_default_offline",modelValue:e.values.is_default_offline,"onUpdate:modelValue":a[1]||(a[1]=a=>e.values.is_default_offline=a),label:"Оффлайн за замовчуванням"},null,8,["modelValue"])])),_:1})]),(0,t.Wm)(u,{label:"Максимальна сума для оффлайн платежу",error:e.errors.max_offline_sum},{default:(0,t.w5)((()=>[(0,t.Wm)(m,{modelValue:e.values.max_offline_sum,"onUpdate:modelValue":a[2]||(a[2]=a=>e.values.max_offline_sum=a),name:"max_offline_sum",type:"number",placeholder:"Введіть максимальну суму для оффлайн платежу"},null,8,["modelValue"])])),_:1},8,["error"]),"1"===e.values.allocation_type?((0,t.wg)(),(0,t.j4)(u,{key:0,label:"Ідентифікатор ПТКС",error:e.errors.ptks_num},{default:(0,t.w5)((()=>[(0,t.Wm)(m,{modelValue:e.values.ptks_num,"onUpdate:modelValue":a[3]||(a[3]=a=>e.values.ptks_num=a),name:"ptks_num",type:"number",placeholder:"Введіть ідентифікатор ПТКС"},null,8,["modelValue"])])),_:1},8,["error"])):(0,t.kq)("",!0),(0,t.Wm)(u,{label:"Secret Key (підпис HmacSHA256)",error:e.errors.secret_key},{hint:(0,t.w5)((()=>[(0,t.Uk)((0,o.zw)(e.$t("Потрібне для підпису запитів зі сторони клієнтів (наприклад запит статусу транзакції)")),1)])),default:(0,t.w5)((()=>[(0,t.Wm)(c,{name:"secrey_key",modelValue:e.values.secret_key,"onUpdate:modelValue":a[4]||(a[4]=a=>e.values.secret_key=a),hasGenerateButton:!0,placeholder:"Введіть або згенеруйте"},null,8,["modelValue"])])),_:1},8,["error"]),(0,t.Wm)(p,null,{title:(0,t.w5)((()=>[(0,t.Uk)((0,o.zw)(e.$t("Ви можете отримувати результати транзакцій на свій backend. \n Для цього заповніть поля нижче")),1)])),_:1}),(0,t.Wm)(u,{label:"Endpoint для повідомлень про результати транзакцій",error:e.errors.endpoint_result},{default:(0,t.w5)((()=>[(0,t.Wm)(m,{modelValue:e.values.endpoint_result,"onUpdate:modelValue":a[5]||(a[5]=a=>e.values.endpoint_result=a),name:"endpoint_result",placeholder:"Наприклад, https://example.com/callback"},null,8,["modelValue"])])),_:1},8,["error"]),(0,t.Wm)(u,{label:"GET параметри для передачі"},{default:(0,t.w5)((()=>[(0,t.Wm)(m,{modelValue:e.values.add_get,"onUpdate:modelValue":a[6]||(a[6]=a=>e.values.add_get=a),name:"add_get",placeholder:"Наприклад, ?param_name=param_value"},null,8,["modelValue"])])),_:1}),(0,t.Wm)(u,{label:"Заголовки запиту"},{default:(0,t.w5)((()=>[(0,t.Wm)(f,{modelValue:e.values.headers,"onUpdate:modelValue":a[7]||(a[7]=a=>e.values.headers=a),name:"headers",placeholder:"Наприклад, Content-type: application/json; Host:example.it"},null,8,["modelValue"])])),_:1}),(0,t.Wm)(_,{modelValue:e.values.payload,"onUpdate:modelValue":a[8]||(a[8]=a=>e.values.payload=a),error:e.errors.payload},null,8,["modelValue","error"]),(0,t.Wm)(h,{modelValue:e.values.sign_stract,"onUpdate:modelValue":a[9]||(a[9]=a=>e.values.sign_stract=a),error:e.errors.sign_stract},null,8,["modelValue","error"]),(0,t._)("div",g,[(0,t.Wm)(u,null,{default:(0,t.w5)((()=>[(0,t.Wm)(d,{modelValue:e.values.regen_key,"onUpdate:modelValue":a[10]||(a[10]=a=>e.values.regen_key=a),name:"regen_key",label:"Згенерувати новий приватний ключ підпису"},null,8,["modelValue"])])),_:1})]),(0,t.Wm)(w,{label:"Тип запиту зворотного виклику",modelValue:e.values.req_type,"onUpdate:modelValue":a[11]||(a[11]=a=>e.values.req_type=a),error:e.errors.req_type},null,8,["modelValue","error"]),(0,t.Wm)(b,{label:"Тип зворотного виклику",modelValue:e.values.callback_req_type,"onUpdate:modelValue":a[12]||(a[12]=a=>e.values.callback_req_type=a),error:e.errors.callback_req_type},null,8,["modelValue","error"]),(0,t.Wm)(u,{label:"Час очікування картки, в секундах",error:e.errors.card_wait},{hint:(0,t.w5)((()=>[(0,t.Uk)(" Час, який термінал очікує, що клієнт прикладе платіжний пристрій ")])),default:(0,t.w5)((()=>[(0,t.Wm)(m,{modelValue:e.values.card_wait,"onUpdate:modelValue":a[13]||(a[13]=a=>e.values.card_wait=a),name:"card_wait",placeholder:"Наприклад, 30",type:"number"},null,8,["modelValue"])])),_:1},8,["error"]),(0,t.Wm)(V,{modelValue:e.values.sync_type,"onUpdate:modelValue":a[14]||(a[14]=a=>e.values.sync_type=a),error:e.errors.sync_type},null,8,["modelValue","error"]),(0,t._)("div",y,[(0,t.Wm)(u,null,{hint:(0,t.w5)((()=>[(0,t.Uk)((0,o.zw)(e.$t("Робота на терміналі не почнеться, якщо не буде користувач не проведе авторизацію по відкриттю зміни")),1)])),default:(0,t.w5)((()=>[(0,t.Wm)(d,{modelValue:e.values.need_shift,"onUpdate:modelValue":a[15]||(a[15]=a=>e.values.need_shift=a),name:"need_shift",label:"Необхідне відкриття зміни"},null,8,["modelValue"])])),_:1})]),(0,t.Wm)(u,{label:"Час синхронізації, в секундах",error:e.errors.sync_period},{hint:(0,t.w5)((()=>[(0,t.Uk)((0,o.zw)(e.$t("Як часто термінал буде виходити на зв’язок з сервером для передачі та отримання даних")),1)])),default:(0,t.w5)((()=>[(0,t.Wm)(m,{modelValue:e.values.sync_period,"onUpdate:modelValue":a[16]||(a[16]=a=>e.values.sync_period=a),name:"sync_period",placeholder:"Наприклад, 30",type:"number"},null,8,["modelValue"])])),_:1},8,["error"])],64)}var b=l(4560),V=l(2619),k=l(2729),Z=l(6686),E=l(999),D=l(3377),U=l(4795),F=l(5449),W=l(5244),$=l(5375),x=l(4887),R=l(4886),I=(0,t.aZ)({props:["formValues","formErrors"],components:{FormField:b.Z,InputField:V.Z,CheckboxField:k.Z,TextareaField:Z.Z,RequestMethodSelect:$.Z,RequestTypeSelect:x.Z,PayloadField:E.Z,SettingsSelect:W.Z,SynctypeSelect:R.Z,SignStractField:F.Z,FormTitle:D.Z,PasswordField:U.Z},data(){return{values:this.formValues||{},errors:this.formErrors||{}}},watch:{formValues:{handler(e){this.values=e},immediate:!0},formErrors:{handler(e){this.errors=e||{}},immediate:!0}}}),q=l(89);const S=(0,q.Z)(I,[["render",w]]);var C=S;const T={class:"fields-container"};function L(e,a,l,r,n,s){const i=(0,t.up)("form-title"),d=(0,t.up)("AddConfigModal"),u=(0,t.up)("input-field"),m=(0,t.up)("form-field");return(0,t.wg)(),(0,t.iD)(t.HY,null,[Boolean(e.values.add_config.length)?(0,t.kq)("",!0):((0,t.wg)(),(0,t.j4)(i,{key:0},{title:(0,t.w5)((()=>[(0,t.Uk)((0,o.zw)(e.$t("У вас ще немає додадкових налаштувань \n Додайти натиснувши на кнопку нижче")),1)])),_:1})),(0,t.Wm)(d,{"form-values":{add_config:e.values.add_config}},null,8,["form-values"]),(0,t._)("div",T,[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(e.values.add_config,(a=>((0,t.wg)(),(0,t.j4)(m,{key:a.name,label:a.label,error:e.errors[a.name]},{default:(0,t.w5)((()=>[(0,t.Wm)(u,{modelValue:a.value,"onUpdate:modelValue":e=>a.value=e,name:a.name,type:"text"},null,8,["modelValue","onUpdate:modelValue","name"])])),_:2},1032,["label","error"])))),128))])],64)}const j={class:"form-actions"};function A(e,a,l,r,n,s){const i=(0,t.up)("v-button"),d=(0,t.up)("input-field"),u=(0,t.up)("form-field"),m=(0,t.up)("v-form"),c=(0,t.up)("v-modal");return(0,t.wg)(),(0,t.iD)(t.HY,null,[(0,t.Wm)(i,{onClick:e.openModal},{text:(0,t.w5)((()=>[(0,t.Uk)((0,o.zw)(e.$t("Додати налаштвання")),1)])),_:1},8,["onClick"]),(0,t.Wm)(c,{ref:"modal","min-width":"30vw","max-width":"30vw"},{title:(0,t.w5)((()=>[(0,t.Uk)((0,o.zw)(e.$t("Додати налаштвання")),1)])),content:(0,t.w5)((()=>[(0,t.Wm)(m,{class:"terminal-form",onSubmit:e.create,"initial-values":e.initialValues},{fields:(0,t.w5)((({values:a,errors:l})=>[(0,t.Wm)(u,{label:"Назва налаштування",error:l.max_offline_sum},{default:(0,t.w5)((()=>[(0,t.Wm)(d,{modelValue:a.label,"onUpdate:modelValue":e=>a.label=e,name:"max_offline_sum",type:"text",placeholder:"Наприклад, Протокол спілкування з контролером"},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1032,["error"]),(0,t.Wm)(u,{label:"Ключ налаштування",error:l.name},{hint:(0,t.w5)((()=>[(0,t.Uk)((0,o.zw)(e.$t("Ключ - назва з якою буде збережено поле налаштування")),1)])),default:(0,t.w5)((()=>[(0,t.Wm)(d,{modelValue:a.name,"onUpdate:modelValue":e=>a.name=e,name:"max_offline_sum",type:"text",placeholder:"Наприклад, vmc_prot"},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1032,["error"]),(0,t.Wm)(u,{label:"Значення",error:l.value},{default:(0,t.w5)((()=>[(0,t.Wm)(d,{modelValue:a.value,"onUpdate:modelValue":e=>a.value=e,name:"max_offline_sum",type:"text",placeholder:"Наприклад, 500"},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1032,["error"]),(0,t._)("div",j,[(0,t.Wm)(i,{"has-max-width":!1,type:"submit"},{text:(0,t.w5)((()=>[(0,t.Uk)((0,o.zw)(e.$t("Додати")),1)])),_:1})])])),_:1},8,["onSubmit","initial-values"])])),_:1},512)],64)}l(7658);var B=l(9566),H=(0,t.aZ)({props:["formValues"],components:{VForm:u.Z,VButton:p.Z,VModal:B.Z,InputField:V.Z,FormField:b.Z},data(){return{values:this.formValues||{},initialValues:{name:"",label:"",value:""}}},watch:{formValues:{handler(e){this.values=e},immediate:!0}},methods:{openModal(){const e=this.$refs.modal;e.open()},create(e){this.values.add_config.push(e),this.initialValues={name:"",label:"",value:""};const a=this.$refs.modal;a.close()}}});const M=(0,q.Z)(H,[["render",A]]);var P=M,z=(0,t.aZ)({props:["formValues","formErrors"],components:{FormTitle:D.Z,FormField:b.Z,InputField:V.Z,AddConfigModal:P},data(){return{values:this.formValues||{},errors:this.formErrors||{}}},watch:{formValues:{handler(e){this.values=e},immediate:!0},formErrors:{handler(e){this.errors=e||{}},immediate:!0}}});const N=(0,q.Z)(z,[["render",L]]);var O=N;const Q={key:0,class:"fields-container"};function G(e,a,l,o,r,n){const s=(0,t.up)("AddDataFields");return Boolean(e.values.add_config&&e.values.add_config.length)?((0,t.wg)(),(0,t.iD)("div",Q,[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(e.values.add_config,(e=>((0,t.wg)(),(0,t.j4)(s,{key:e.name,fieldData:e.field,values:e},null,8,["fieldData","values"])))),128))])):(0,t.kq)("",!0)}const Y={key:0},K={key:1},J={key:2},X={key:3},ee={key:4};function ae(e,a,l,o,r,n){const s=(0,t.up)("input-field"),i=(0,t.up)("form-field"),d=(0,t.up)("checkbox-field"),u=(0,t.up)("field-select"),m=(0,t.up)("array-field");return(0,t.wg)(),(0,t.iD)(t.HY,null,["text"===e.field?.type?((0,t.wg)(),(0,t.iD)("div",Y,[(0,t.Wm)(i,{label:e.field.info},{default:(0,t.w5)((()=>[(0,t.Wm)(s,{name:"max_offline_sum",type:"text",modelValue:e.values.value,"onUpdate:modelValue":a[0]||(a[0]=a=>e.values.value=a),placeholder:e.field.info,disabled:!JSON.parse(e.field.can_user_edit)},null,8,["modelValue","placeholder","disabled"])])),_:1},8,["label"])])):(0,t.kq)("",!0),"tag"===e.field?.type?((0,t.wg)(),(0,t.iD)("div",K,[(0,t.Wm)(i,{label:e.field.info},{default:(0,t.w5)((()=>[(0,t.Wm)(s,{name:"max_offline_sum",type:"text",modelValue:e.values.value,"onUpdate:modelValue":a[1]||(a[1]=a=>e.values.value=a),placeholder:e.field.info,disabled:!JSON.parse(e.field.can_user_edit)},null,8,["modelValue","placeholder","disabled"])])),_:1},8,["label"])])):(0,t.kq)("",!0),"bool"===e.field?.type?((0,t.wg)(),(0,t.iD)("div",J,[(0,t.Wm)(d,{name:"is_default_offline",modelValue:e.values.value,"onUpdate:modelValue":a[2]||(a[2]=a=>e.values.value=a),label:e.field.info,disabled:!JSON.parse(e.field.can_user_edit)},null,8,["modelValue","label","disabled"])])):(0,t.kq)("",!0),"select"===e.field?.type?((0,t.wg)(),(0,t.iD)("div",X,[(0,t.Wm)(u,{name:"is_default_offline",modelValue:e.values.value,"onUpdate:modelValue":a[3]||(a[3]=a=>e.values.value=a),label:e.field.info,data:e.field.data},null,8,["modelValue","label","data"])])):(0,t.kq)("",!0),"array_text"===e.field?.type?((0,t.wg)(),(0,t.iD)("div",ee,[(0,t.Wm)(m,{name:e.field.field_name,label:e.field.info,min:e.field.data.min,max:e.field.data.max,values:e.values,disabled:!JSON.parse(e.field.can_user_edit)},null,8,["name","label","min","max","values","disabled"])])):(0,t.kq)("",!0)],64)}function le(e,a,l,o,r,n){const s=(0,t.up)("select-field"),i=(0,t.up)("form-field");return(0,t.wg)(),(0,t.j4)(i,{label:e.label},{default:(0,t.w5)((()=>[(0,t.Wm)(s,{hasSearch:!1,options:e.options,"model-value":e.value,"onUpdate:modelValue":e.select},null,8,["options","model-value","onUpdate:modelValue"])])),_:1},8,["label"])}var te=l(2946),oe=(0,t.aZ)({props:["modelValue","data","label"],emits:["update:modelValue"],components:{SelectField:te.Z,FormField:b.Z},data(){return{options:[]}},watch:{data:{handler(e){this.options=e.split("|").map((e=>({label:e,value:e})))},immediate:!0}},methods:{select(e){this.$emit("update:modelValue",e)}}});const re=(0,q.Z)(oe,[["render",le]]);var ne=re;const se={class:"container"},ie=["onClick"];function de(e,a,l,o,r,n){const s=(0,t.up)("InputField"),i=(0,t.up)("form-field");return(0,t.wg)(),(0,t.j4)(i,{label:e.label},{default:(0,t.w5)((()=>[(0,t._)("div",se,[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(e.records,((l,o)=>((0,t.wg)(),(0,t.iD)("div",{class:"record",key:o},[(0,t.Wm)(s,{name:"name",modelValue:e.values.value[o],"onUpdate:modelValue":a=>e.values.value[o]=a,disabled:!e.canEdit},null,8,["modelValue","onUpdate:modelValue","disabled"]),e.canRemove?((0,t.wg)(),(0,t.iD)("div",{key:0,class:"button",onClick:a=>e.remove(o)},"-",8,ie)):(0,t.kq)("",!0),e.canAdd&&e.records.length-1===o?((0,t.wg)(),(0,t.iD)("div",{key:1,class:"button",onClick:a[0]||(a[0]=(...a)=>e.add&&e.add(...a))}," + ")):(0,t.kq)("",!0)])))),128))])])),_:1},8,["label"])}var ue=(0,t.aZ)({props:["label","values","min","max","canEdit","name"],components:{FormField:b.Z,InputField:V.Z},data(){return{records:[""],canAdd:!0,canRemove:!1}},watch:{values:{handler(e){e?.value?.length&&(this.records=e.value)},immediate:!0},"records.length":{handler(e){this.canAdd=this.canEdit&&e<parseInt(this.max||1/0),this.canRemove=this.canEdit&&e>parseInt(this.min||1)},immediate:!0}},methods:{add(){this.records.push("")},remove(e){this.records=this.records.filter(((a,l)=>l!==e))}}});const me=(0,q.Z)(ue,[["render",de],["__scopeId","data-v-18124da2"]]);var ce=me,pe=(0,t.aZ)({props:["fieldData","values"],components:{FormField:b.Z,InputField:V.Z,CheckboxField:k.Z,FieldSelect:ne,ArrayField:ce},data(){return{field:null,fieldValues:{}}},watch:{fieldData:{handler(e){this.field=e},immediate:!0},values:{handler(e){e?.length&&(this.fieldValues=e)},immediate:!0}}});const fe=(0,q.Z)(pe,[["render",ae]]);var _e=fe,he=(0,t.aZ)({props:["formValues","formErrors"],components:{AddDataFields:_e},data(){return{values:this.formValues||{add_config:[],add_data:{}},errors:this.formErrors||{}}},computed:{allocType(){return this.$route.query.alloc_type},terminalRef(){return this.$store.state.terminals.terminalsRef},addDataFields(){if(!this.terminalRef?.add_data_fields)return[];const e=this.terminalRef.add_data_fields.filter((e=>e.alloc_type===this.allocType));return e}},watch:{formValues:{handler(e){e.add_config?.length&&Object.keys(e.add_data).length&&(this.values=e)},immediate:!0},formErrors:{handler(e){this.errors=e||{}},immediate:!0},addDataFields:{handler(e){this.values.add_config=e.map((e=>{const a={text:e.data||"",tag:e.data||"",bool:e.data||!1,select:"",array_text:[]};return{name:e.field_name,label:e.info,type:e.type,value:this.values.add_data[e.field_name]||a[e.type],data:e.data,field:e}}))},immediate:!0}}});const ve=(0,q.Z)(he,[["render",G]]);var ge=ve;const ye={name:"",settings:"",secret_key:"",max_offline_sum:0,is_default_offline:!1,is_for_all_card:!0,can_user_add_card:!1,endpoint_result:"",add_get:"",headers:"",payload:"",sign_stract:"",card_wait:30,req_type:"",need_shift:!1,sync_type:"",sync_period:30,update_all_term:!1,add_data:[],callback_req_type:"",regen_key:!1,allocation_type:"",ptks_num:"",add_config:[]};var we=(0,t.aZ)({props:{actionsFixed:{type:Boolean,required:!1,default:!1},configData:{type:Object,required:!1,default(){return ye}}},components:{VForm:u.Z,VTab:m.Z,VTabs:c.Z,VButton:p.Z,GeneralConfig:C,AddConfig:O,AddConfigSelector:ge},setup(){const e=(0,d.pm)();return{toast:e,Rules:_.i,offlineTerminal:h.Cb}},data(){return{initialValues:{...ye,...this.configData}}},watch:{configData:{handler(e){this.initialValues={...this.initialValues,...e}},immediate:!0}},computed:{loading(){return this.$store.state.terminals.formLoading},allocType(){return this.$route.query.alloc_type},terminalRef(){return this.$store.state.terminals.terminalsRef},hasAddFields(){return this.terminalRef?.add_data_fields?.some((e=>e.alloc_type===this.allocType))}},methods:{sendConfig(e){const a=this.$route.query.alloc_type,l={...e,alloc_type:a,add_data:e.add_config.reduce(((e,a)=>(e[a.name]=a.value,e)),{})};this.$store.dispatch(f.T.CREATE_OFFLINE_TERMINAL,{terminalData:l,toast:this.toast})}}});const be=(0,q.Z)(we,[["render",i]]);var Ve=be,ke=l(7863),Ze=(0,t.aZ)({components:{AppLayout:n.Z,AppLoading:ke.Z,TerminalForm:Ve},computed:{loading(){return this.$store.state.terminals.loading},allocType(){return this.$route.query.alloc_type},configData(){return this.$store.state.terminals.terminalConfig}},mounted(){this.$store.dispatch(f.T.GET_TERMINALS_REF),this.$store.dispatch(f.T.GET_TERMINAL_CONFIG,{alloc_type:this.allocType})}});const Ee=(0,q.Z)(Ze,[["render",r]]);var De=Ee}}]);
//# sourceMappingURL=1616.37bb48a3.js.map
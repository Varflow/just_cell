"use strict";(self["webpackChunkjust_sell"]=self["webpackChunkjust_sell"]||[]).push([[3755],{3147:function(e,t,n){n.d(t,{f2:function(){return ie},Zp:function(){return C},nN:function(){return P},CM:function(){return B},w6:function(){return k},hw:function(){return U},iq:function(){return Q}});var o=n(3396),a=n(4870),s=n(8841),l=n(3e3),i=n(7139),d=n(4109);const r={class:"popover-action"},c={class:"popover-action"};var u=(0,o.aZ)({__name:"IngredientActions",setup(e){return(e,t)=>{const n=(0,o.up)("RouterLink");return(0,o.wg)(),(0,o.j4)(d.Z,null,{actions:(0,o.w5)((()=>[(0,o.Wm)(n,{to:{name:"editBranch"}},{default:(0,o.w5)((()=>[(0,o._)("div",r,(0,i.zw)(e.$t("Редагувати")),1)])),_:1}),(0,o._)("div",c,(0,i.zw)(e.$t("Видалити")),1)])),_:1})}}});const p=u;var m=p,g=n(9242),v=n(438);const h={class:"quantity-field"};var f=(0,o.aZ)({__name:"IngredientsQuantityField",props:{quantity:{}},setup(e){const t=e,n=(0,o.Fl)((()=>{const e=/\d+/g,n=t.quantity,o=n.match(e);return o?o.join(""):""})),s=(0,a.iH)(!1),l=(0,a.iH)(null),d=()=>{s.value=!0,(0,o.Y3)((()=>{l.value.focus()}))},r=()=>{s.value=!1};return(e,t)=>((0,o.wg)(),(0,o.iD)(o.HY,null,[(0,o.wy)((0,o._)("div",h,[(0,o.Uk)((0,i.zw)(e.quantity)+" ",1),(0,o._)("img",{src:v,alt:"Edit",onClick:d})],512),[[g.F8,!s.value]]),(0,o.wy)((0,o._)("input",{autofocus:"","onUpdate:modelValue":t[0]||(t[0]=e=>n.value=e),onBlur:r,class:"form-field__input",ref_key:"input",ref:l},null,544),[[g.F8,s.value],[g.nr,n.value]])],64))}}),_=n(89);const w=(0,_.Z)(f,[["__scopeId","data-v-8cfdee9e"]]);var y=w;const b=()=>{const e=(0,l.Cl)();return[e.accessor("photo",{header:"Фото",cell:e=>(0,o.h)("img",{src:e.getValue(),width:80}),sortDescFirst:!0}),e.accessor("id",{cell:e=>e.getValue(),header:e=>"ID",sortDescFirst:!0}),e.accessor("name",{header:"Назва",cell:e=>e.getValue(),sortDescFirst:!0}),e.accessor("quantity",{header:"Кількість",cell:e=>(0,o.h)(y,{quantity:e.getValue()}),sortDescFirst:!0}),e.accessor("updatedAt",{header:"Останнє оновлення",cell:e=>e.getValue(),sortDescFirst:!0}),e.display({cell:()=>(0,o.h)(m),header:"Дії"})]};var Z=(0,o.aZ)({__name:"IngredientsTable",props:{data:{}},setup(e){const t=b();return(e,n)=>((0,o.wg)(),(0,o.j4)(s.Z,{data:e.data,columns:(0,a.SU)(t),"has-pagination":!1,total:e.data.length,empty:0===e.data.length,striped:!0},null,8,["data","columns","total","empty"]))}});const I=Z;var k=I,V=n(4610),W=(0,o.aZ)({__name:"CreateIngredientButton",setup(e){return(e,t)=>{const n=(0,o.up)("RouterLink");return(0,o.wg)(),(0,o.j4)(n,{to:{name:"createIngredient"},class:"btn btn-primary"},{default:(0,o.w5)((()=>[(0,o.Wm)(V.Z,null,{text:(0,o.w5)((()=>[(0,o.Uk)(" Додати інгредієнт ")])),_:1})])),_:1})}}});const T=W;var C=T,q=n(4560),x=n(2946),$=n(2578);const D=e=>[{id:1,name:"Вода",quantity:"10л",updatedAt:"2021-07-01T00:00:00",photo:n(3578)},{id:2,name:"Кофе",quantity:"10кг",updatedAt:"2021-07-01T00:00:00",photo:n(9178)},{id:3,name:"Стаканчики",quantity:"100шт",updatedAt:"2021-07-01T00:00:00",photo:n(3620)}],F=()=>[{id:1,name:"Американо",ingredients:[{name:"Вода",quantity:"10л",photo:n(3578)},{name:"Кофе",quantity:"10кг",photo:n(9178)},{name:"Стаканчики",quantity:"100шт",photo:n(3620)}]},{id:2,name:"Капучино",ingredients:[{name:"Вода",quantity:"5л",photo:n(3578)},{name:"Кофе",quantity:"2кг",photo:n(9178)},{name:"Стаканчики",quantity:"100шт",photo:n(3620)}]}],U=(0,$.Q_)("ingredient-template",{state:()=>({isLoading:!1,ingredientTemplate:[],currentIngredientTemplate:null}),actions:{async fetchIngredientTemplates(){this.isLoading=!0,this.ingredientTemplate=F(),this.isLoading=!1},setCurrentIngredientTemplate(e){this.currentIngredientTemplate=e},addFieldsToTemplate(e){this.currentIngredientTemplate&&(this.currentIngredientTemplate={...this.currentIngredientTemplate,fields:e})}},getters:{getIngredientTemplateById:e=>t=>e.ingredientTemplate.find((e=>e.id===t))}});var j=(0,o.aZ)({__name:"IngredientTemplatesSelect",props:{modelValue:{},modelModifiers:{}},emits:["update:modelValue"],setup(e){const t=U(),n=(0,o.Fl)((()=>t.ingredientTemplate.map((e=>({label:e.name,value:e.id}))))),a=(0,o.tT)(e,"modelValue");return(e,t)=>((0,o.wg)(),(0,o.j4)(q.Z,{label:"Шаблони інгредієнтів"},{default:(0,o.w5)((()=>[(0,o.Wm)(x.Z,{options:n.value,name:"syncTypes","input-placeholder":"Оберіть шаблон","search-placeholder":"Введіть назву шаблону","has-search":!1,modelValue:a.value,"onUpdate:modelValue":t[0]||(t[0]=e=>a.value=e)},null,8,["options","modelValue"])])),_:1}))}});const H=j;var B=H,L=n(2619);const S={key:0},A={class:"product-ingredients-fields"},z={class:"product-ingredient-name"},Y=["src","alt"];var K=(0,o.aZ)({__name:"IngredientFieldsList",props:{templateId:{}},setup(e){const t=e,n=U(),a=(0,o.Fl)((()=>n.getIngredientTemplateById(t.templateId)));return(0,o.YP)((()=>t.templateId),(()=>{n.setCurrentIngredientTemplate(a.value)})),(e,t)=>a.value?((0,o.wg)(),(0,o.iD)("div",S,[(0,o._)("div",A,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(a.value.ingredients,(e=>((0,o.wg)(),(0,o.iD)("div",{key:e.name,class:"product-ingredient-field"},[(0,o._)("h3",z,(0,i.zw)(e.name),1),(0,o._)("img",{src:e.photo,alt:e.name,class:"product-ingredient-image"},null,8,Y),(0,o.Wm)(q.Z,{label:"К-сть"},{default:(0,o.w5)((()=>[(0,o.Wm)(L.Z,{modelValue:e.quantity,"onUpdate:modelValue":t=>e.quantity=t,name:"point",type:"text",placeholder:"Напишіть назву інгредієнта"},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1024)])))),128))])])):(0,o.kq)("",!0)}});const M=(0,_.Z)(K,[["__scopeId","data-v-4a0271bc"]]);var P=M,E=n(9566),N=n(6931);const Q=(0,$.Q_)("stock",{state:()=>({isLoading:!1,ingredients:[]}),actions:{async getBranchStock(e){this.isLoading=!0,this.ingredients=D(e),this.isLoading=!1}}});var R=(0,o.aZ)({__name:"IngredientsSelect",props:{modelValue:{},modelModifiers:{}},emits:["update:modelValue"],setup(e){const t=Q(),n=(0,o.Fl)((()=>t.ingredients.map((e=>({icon:e.photo,label:e.name,value:e.id})))));(0,o.bv)((()=>{t.getBranchStock(1)}));const a=(0,o.tT)(e,"modelValue");return(e,t)=>((0,o.wg)(),(0,o.j4)(q.Z,{label:"Інгредієнтів"},{default:(0,o.w5)((()=>[(0,o.Wm)(x.Z,{options:n.value,name:"syncTypes","input-placeholder":"Оберіть інгредієнт","search-placeholder":"Введіть назву інгредієнта","has-search":!1,modelValue:a.value,"onUpdate:modelValue":t[0]||(t[0]=e=>a.value=e)},null,8,["options","modelValue"])])),_:1}))}});const J=R;var O=J,X=n(2940);const G={class:"ingredient-select__container"},ee=(0,o._)("p",{class:"ingredient-divider"},"aбо",-1);var te=(0,o.aZ)({__name:"AddIngredientForm",emits:["submit"],setup(e,{emit:t}){const n=t,a={id:"",name:"",quantity:"0"},s=e=>{n("submit",e)};return(e,t)=>((0,o.wg)(),(0,o.j4)(N.Z,{"class-names":"add-ingredient-form","initial-values":a,onSubmit:s},{fields:(0,o.w5)((({values:t})=>[(0,o._)("div",G,[(0,o.Wm)(O,{modelValue:t.id,"onUpdate:modelValue":e=>t.id=e},null,8,["modelValue","onUpdate:modelValue"]),ee]),(0,o.Wm)(q.Z,{label:"Назва:"},{default:(0,o.w5)((()=>[(0,o.Wm)(L.Z,{modelValue:t.name,"onUpdate:modelValue":e=>t.name=e,name:"point",type:"text",placeholder:"Введіть назву інгредієнта"},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1024),(0,o.Wm)(q.Z,{label:"К-сть:"},{default:(0,o.w5)((()=>[(0,o.Wm)(L.Z,{modelValue:t.point,"onUpdate:modelValue":e=>t.point=e,name:"point",type:"text",placeholder:"Введіть к-сть"},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1024),(0,o.Wm)(q.Z,{label:"Фото"},{default:(0,o.w5)((()=>[(0,o.Wm)(X.Z)])),_:1}),(0,o.Wm)(V.Z,{type:"submit"},{text:(0,o.w5)((()=>[(0,o.Uk)((0,i.zw)(e.$t("Додати новий інгредієнт")),1)])),_:1})])),_:1}))}});const ne=te;var oe=ne;const ae={class:"ingredient-modal__description"};var se=(0,o.aZ)({__name:"AddIngredientButton",setup(e){const t=(0,a.iH)(null),n=()=>t?.value.open();return(e,a)=>((0,o.wg)(),(0,o.iD)(o.HY,null,[(0,o.Wm)(V.Z,{onClick:n,class:"add-ingredient-button"},{text:(0,o.w5)((()=>[(0,o.Uk)((0,i.zw)(e.$t("Додати інредієнт")),1)])),_:1}),(0,o.Wm)(E.Z,{ref_key:"modal",ref:t,"min-width":"50vw"},{title:(0,o.w5)((()=>[(0,o.Uk)((0,i.zw)(e.$t("Додати інредієнт")),1)])),description:(0,o.w5)((()=>[(0,o._)("p",ae,(0,i.zw)(e.$t("Оберіть інгредієнт зі списку або створіть новий")),1)])),content:(0,o.w5)((()=>[(0,o.Wm)(oe)])),_:1},512)],64))}});const le=(0,_.Z)(se,[["__scopeId","data-v-632189cc"]]);var ie=le},9566:function(e,t,n){n.d(t,{Z:function(){return h}});var o=n(3396),a=n(7139),s=n(9242),l=n.p+"img/close-icon.622be15f.svg";const i={class:"modal-header"},d={class:"modal-title"},r=(0,o._)("img",{src:l,alt:"Close"},null,-1),c=[r],u={class:"modal-footer"};function p(e,t,n,l,r,p){return(0,o.wg)(),(0,o.j4)(o.lR,{to:"body"},[(0,o._)("div",{class:(0,a.C_)(["modal",{"modal--opened":e.opened,[`${e.classNames}`]:Boolean(e.classNames)}]),tabindex:"-1",role:"dialog",onClick:t[2]||(t[2]=(...t)=>e.close&&e.close(...t)),ref:"modal"},[(0,o._)("div",{class:"modal-content",style:(0,a.j5)({minWidth:e.minWidth,maxWidth:e.maxWidth,minHeight:e.minHeight,maxHeight:e.maxHeight}),onClick:t[1]||(t[1]=(0,s.iM)((()=>{}),["stop"]))},[(0,o._)("div",i,[(0,o._)("h4",d,[(0,o.WI)(e.$slots,"title")]),e.showCloseButton?((0,o.wg)(),(0,o.iD)("div",{key:0,class:"modal-close-button",onClick:t[0]||(t[0]=(...t)=>e.close&&e.close(...t))},c)):(0,o.kq)("",!0)]),(0,o.WI)(e.$slots,"description"),(0,o.WI)(e.$slots,"content",{close:e.close}),(0,o._)("div",u,[(0,o.WI)(e.$slots,"footer",{close:e.close})])],4)],2)])}var m=(0,o.aZ)({modalController:null,props:{classNames:String,showCloseButton:{type:Boolean,default:!1},minWidth:String,maxWidth:String,minHeight:String,maxHeight:String},data(){return{opened:!1}},mounted(){document.addEventListener("keydown",this.onKeydown)},beforeUnmount(){document.removeEventListener("keydown",this.onKeydown)},methods:{open(){let e,t;const n=new Promise(((n,o)=>{e=n,t=o}));return this.$options.modalController={resolve:e,reject:t},this.opened=!0,n},close(){this.$options.modalController.resolve(!0),this.opened=!1},onKeydown(e){"Escape"===e.key&&this.close()}}}),g=n(89);const v=(0,g.Z)(m,[["render",p]]);var h=v},4109:function(e,t,n){n.d(t,{Z:function(){return v}});var o=n(3396),a=n(9242),s=n.p+"img/kebab-icon.addd3d66.svg";const l=(0,o._)("img",{src:s,alt:"Actions"},null,-1),i=[l],d=["data-show"],r={key:0,class:"popover-tooltip__actions"};function c(e,t,n,s,l,c){const u=(0,o.Q2)("click-outside");return(0,o.wy)(((0,o.wg)(),(0,o.iD)("div",{class:"popover",onClick:t[1]||(t[1]=(0,a.iM)((()=>{}),["stop"])),ref:"popover"},[(0,o._)("div",{class:"popover-trigger",ref:"trigger",onClick:t[0]||(t[0]=(...t)=>e.toggle&&e.toggle(...t))},i,512),(0,o._)("div",{class:"popover-tooltip",ref:"tooltip","data-show":e.opened},[e.opened?((0,o.wg)(),(0,o.iD)("div",r,[(0,o.WI)(e.$slots,"actions",{close:e.close,hide:e.hide})])):(0,o.kq)("",!0)],8,d)])),[[u,e.close]])}var u=n(3910),p=(0,o.aZ)({data(){return{opened:!1}},mounted(){const e=this.$refs.trigger,t=this.$refs.tooltip;this.popover=(0,u.fi)(e,t,{placement:"left-start",modifiers:[{name:"offset",options:{offset:[-10,10]}}]})},methods:{toggle(){this.opened=!this.opened,this.popover?.update(),this.popover?.setOptions((e=>({...e,modifiers:[...e.modifiers,{name:"eventListeners",enabled:this.opened}]})))},close(){const e=this.$refs.tooltip;e.style.opacity="1",this.opened=!1},hide(){const e=this.$refs.tooltip;e.style.opacity="0"}}}),m=n(89);const g=(0,m.Z)(p,[["render",c]]);var v=g},9983:function(e,t,n){n.d(t,{Z:function(){return u}});var o=n(3396),a=n(9242);const s={class:"tab-pane"};function l(e,t,n,l,i,d){return(0,o.wy)(((0,o.wg)(),(0,o.iD)("div",s,[(0,o.WI)(e.$slots,"default")],512)),[[a.F8,l.isActive]])}var i=n(4870),d={props:["title"],setup(e){const t=(0,i.iH)(!1),n=(0,o.f3)("TabsProvider");return(0,o.YP)((()=>n.selectedIndex),(()=>{t.value=e.title===n.selectedIndex})),(0,o.wF)((()=>{t.value=e.title===n.selectedIndex})),{isActive:t}}},r=n(89);const c=(0,r.Z)(d,[["render",l]]);var u=c},6890:function(e,t,n){n.d(t,{Z:function(){return g}});var o=n(3396),a=n(7139);const s={class:"tabs"},l={class:"tabs-pills"},i=["onClick"],d={class:"tabs-panes"};function r(e,t,n,r,c,u){return(0,o.wg)(),(0,o.iD)("div",s,[(0,o._)("div",l,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(e.tabs,(t=>((0,o.wg)(),(0,o.iD)("div",{class:(0,a.C_)(["tab-pill",{active:e.selectedIndex===t.props.title}]),key:t.props.title,onClick:n=>e.selectTab(t.props.title)},(0,a.zw)(e.$t(t.props.title)),11,i)))),128))]),(0,o._)("div",d,[(0,o.WI)(e.$slots,"default")])])}var c=n(4870),u=(0,o.aZ)({setup(e,{slots:t,emit:n}){const a=(0,c.qj)({selectedIndex:null,tabs:[],count:0});(0,o.JJ)("TabsProvider",a);const s=e=>{a.selectedIndex=e,n("change",e)},l=()=>{t.default&&(a.tabs=t.default())};return(0,o.wF)((()=>l())),(0,o.Xn)((()=>l())),(0,o.bv)((()=>{s(a.tabs.at(0).props.title)})),{...(0,c.BK)(a),selectTab:s}}}),p=n(89);const m=(0,p.Z)(u,[["render",r]]);var g=m},438:function(e,t,n){e.exports=n.p+"img/edit-icon.d71cd42d.svg"},9178:function(e,t,n){e.exports=n.p+"img/coffe.00f14831.jpg"},3620:function(e,t,n){e.exports=n.p+"img/glass.25fd0dc4.jpg"},3578:function(e,t,n){e.exports=n.p+"img/water.c76cba6b.png"}}]);
//# sourceMappingURL=3755.55563f41.js.map
"use strict";(self["webpackChunkjust_sell"]=self["webpackChunkjust_sell"]||[]).push([[811],{7359:function(t,a,e){e.d(a,{X:function(){return p}});e(7658);var s=e(2578),n=e(7547),o=e(473),c=e(8818),l=e(3093);const i=async()=>{const{data:t}=await n.d.get(o.M.GET_POINTS);return t},r=async t=>{const a={...t,sign:await(0,c.Xx)({fiscal_name:t.fiscal_name,fiscal_pass:t.fiscal_pass},(0,l.LP)())},{data:e}=await n.d.postForm(o.M.UPLOAD_FISCAL_KEY,a);return e},d=async t=>{const a=t.points.map((t=>({chief_of_point:t.chief_of_point,chief_phone:t.chief_phone,close_day:t.close_day,close_time:t.close_time}))),e={...t,sign:await(0,c.ar)(a,(0,l.LP)())},{data:s}=await n.d.post(o.M.ADD_POINT,e);return s};var u=e(6581);const p=(0,s.Q_)("points",{state:()=>({loading:!1,pointsByKey:[],points:[]}),actions:{async getPoints(){this.loading=!0;const t=await i();0===t.code&&(this.points=t.data?.map((t=>({...t,is_fiscal:t.is_fiscal?JSON.parse(t.is_fiscal)?"Так":"Ні":"",is_test:t.is_test?JSON.parse(t.is_test)?"Так":"Ні":"",subRows:[{ID:t.id,"Назва":t.POINT_NAME,"Адреса":t.POINT_ADDRESS}]})))),this.loading=!1},async uploadFiscalKey(t){const a=await r(t);0===a.code&&(this.pointsByKey=a.data,u.Z.push({name:"fiscalAdd"}))},async craetePoints(t){const a=await d(t);0===a.code&&(this.pointsByKey=a.data)}}})},811:function(t,a,e){e.r(a),e.d(a,{default:function(){return D}});var s=e(3396),n=e(7139),o=e(8231),c=e(7863),l=e(3e3),i=e(2240),r=e(8841);const d=(0,s.aZ)({components:{VTable:r.Z}});var u=(0,s.aZ)({...d,__name:"PointsTable",props:{data:{},empty:{type:Boolean},total:{}},setup(t){const a=(0,l.Cl)(),e=[a.accessor("id",{cell:t=>{const a=t.getValue(),e=t.row.getIsExpanded(),s=t.row.getToggleExpandedHandler();return(0,i.A)(a,e,s)},header:t=>t.column.id,sortDescFirst:!0}),a.accessor("POINT_NAME",{cell:t=>t.getValue(),header:"Назва",sortDescFirst:!0}),a.accessor("FISCAL_NUM_PRRO",{header:"ПРРО №",cell:t=>t.getValue(),sortDescFirst:!0}),a.accessor("auto_close",{header:"Час закриття зміни",cell:t=>t.getValue(),sortDescFirst:!0}),a.accessor("auto_close_day_num",{header:"Дні закриття зміни",cell:t=>t.getValue(),sortDescFirst:!0}),a.accessor("is_fiscal",{header:"Чи фіскальна",cell:t=>t.getValue(),sortDescFirst:!0}),a.accessor("is_test",{header:"Чи тестова",cell:t=>t.getValue(),sortDescFirst:!0})];return(t,a)=>((0,s.wg)(),(0,s.j4)(r.Z,{data:t.data,columns:e,empty:t.empty,total:t.total},null,8,["data","empty","total"]))}});const p=u;var _=p,g=e(4610),m=(0,s.aZ)({__name:"AddPointButton",setup(t){return(t,a)=>{const e=(0,s.up)("router-link");return(0,s.wg)(),(0,s.j4)(e,{to:{name:"fiscalCreate"},class:"terminal-create-btn"},{default:(0,s.w5)((()=>[(0,s.Wm)(g.Z,{hasMaxWidth:!1},{text:(0,s.w5)((()=>[(0,s.Uk)((0,n.zw)(t.$t("Додати точку")),1)])),_:1})])),_:1})}}});const h=m;var f=h,w=e(7359),y=(0,s.aZ)({__name:"PointsListPage",setup(t){const a=(0,w.X)(),e=(0,s.Fl)((()=>a.points)),l=(0,s.Fl)((()=>a.loading));return(0,s.bv)((()=>{a.getPoints()})),(t,a)=>((0,s.wg)(),(0,s.j4)(o.Z,null,{appLoading:(0,s.w5)((()=>[(0,s.Wm)(c.Z,{loading:l.value},null,8,["loading"])])),appTitle:(0,s.w5)((()=>[(0,s.Uk)((0,n.zw)(t.$t("Точки")),1)])),appExtra:(0,s.w5)((()=>[(0,s.Wm)(f)])),appContent:(0,s.w5)((()=>[(0,s.Wm)(_,{data:e.value,empty:!e.value?.length,total:e.value?.length},null,8,["data","empty","total"])])),_:1}))}});const P=y;var D=P}}]);
//# sourceMappingURL=811.4b093858.js.map
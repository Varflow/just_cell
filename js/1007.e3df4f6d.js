"use strict";(self["webpackChunkjust_sell"]=self["webpackChunkjust_sell"]||[]).push([[1007],{1002:function(e,t,l){l.d(t,{Z:function(){return V}});var a=l(3396),n=l(9242),o=l(4870),s=l(4677);const i=e=>((0,a.dD)("data-v-0416e99e"),e=e(),(0,a.Cn)(),e),u={class:"copy-block"},r={key:0,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"copy-button__icon"},c=i((()=>(0,a._)("path",{d:"M20 7h-3a2 2 0 0 1-2-2V2"},null,-1))),d=i((()=>(0,a._)("path",{d:"M9 18a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h7l4 4v10a2 2 0 0 1-2 2Z"},null,-1))),m=i((()=>(0,a._)("path",{d:"M3 7.6v12.8A1.6 1.6 0 0 0 4.6 22h9.8"},null,-1))),p=[c,d,m],v={key:1,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"lucide lucide-clipboard-check"},h=i((()=>(0,a._)("rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1"},null,-1))),w=i((()=>(0,a._)("path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"},null,-1))),f=i((()=>(0,a._)("path",{d:"m9 14 2 2 4-4"},null,-1))),_=[h,w,f];var y=(0,a.aZ)({__name:"CopyCard",props:{value:{}},setup(e){const t=(0,s.pm)(),l=e,i=(0,o.iH)(!1),c=()=>{window.navigator.clipboard.writeText(l.value),i.value=!0,t.success("Скопійовано в буфер обміну",{timeout:1500}),setTimeout((()=>{i.value=!1}),1500)};return(e,t)=>((0,a.wg)(),(0,a.iD)("div",u,[(0,a.WI)(e.$slots,"default"),(0,a._)("div",{class:"copy-button",onClick:(0,n.iM)(c,["stop"])},[i.value?((0,a.wg)(),(0,a.iD)("svg",v,_)):((0,a.wg)(),(0,a.iD)("svg",r,p))])]))}}),g=l(89);const k=(0,g.Z)(y,[["__scopeId","data-v-0416e99e"]]);var V=k},4675:function(e,t,l){l.r(t),l.d(t,{default:function(){return Q}});var a=l(3396),n=l(7139),o=l(2483),s=l(2469),i=l(8231),u=l(2578),r=l(4870),c=l(9378),d=l(3904);const m=(0,u.Q_)("ecomm-transactions",(()=>{const e=(0,r.iH)(!1),t=(0,r.iH)([]),l=(0,r.iH)(0);async function a(a,n){try{e.value=!0;const o=await(0,c.c)(n);t.value=(0,d.f5)(o.list,a?.fields),l.value=o.totalCount,e.value=!1}catch(o){console.error(o)}finally{e.value=!1}}return{isFetching:e,transactions:t,total:l,getEcommTransactions:a}}));var p=l(638),v=l(4610),h=l(4560),w=l(2619),f=l(9242),_=l(4745),y=l(5572),g=l(8445);const k=["name"],V={class:"select-field__dropdown"},b={key:0,class:"select-field__item"};var q=(0,a.aZ)({__name:"ComSelectField",props:(0,a.Vf)({name:{},options:{},inputPlaceholder:{},searchPlaceholder:{},hasSearch:{type:Boolean,default:!0},disabled:{},size:{default:"md"}},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(e){const t=(0,a.Rr)(),l=e,o=(0,a.tT)(e,"modelValue"),s=(0,r.iH)(!1);let i=(0,r.qj)(null);const u=(0,a.Fl)((()=>Boolean(t.extra))),c=()=>s.value=!0,d=()=>s.value=!s.value,m=()=>s.value=!1,p=e=>{i=e,o.value=e.value,m()},v=()=>{console.log("")},h=e=>{"Escape"===e.key&&m()},w=()=>{if(!o.value){const e=l.options,t=e[0];return void(i=t)}const e=l.options,t=e.find((({value:e})=>e==o.value));i=t};return(0,a.bv)((()=>{w(),document.addEventListener("keydown",h)})),(0,a.Jd)((()=>{document.removeEventListener("keydown",h)})),(e,t)=>{const l=(0,a.Q2)("click-outside");return(0,a.wy)(((0,a.wg)(),(0,a.iD)("div",{class:(0,n.C_)(["select-field",{"select-field--active":s.value,"select-field--disabled":e.disabled}]),ref:"selectField"},[(0,a._)("input",{type:"text",name:e.name,class:"select-input-hidden"},null,8,k),(0,a._)("div",{class:(0,n.C_)(["select-field__container form-field__input",`form-field__input--${e.size}`]),onClick:t[0]||(t[0]=t=>e.hasSearch?c():d())},[(0,a.wy)((0,a.Wm)(g.Z,{label:(0,r.SU)(i)?.label||"",placeholder:e.inputPlaceholder?e.$t(e.inputPlaceholder):""},null,8,["label","placeholder"]),[[f.F8,!e.hasSearch||!s.value]]),(0,a.wy)((0,a.Wm)(y.Z,{placeholder:e.searchPlaceholder?e.$t(e.searchPlaceholder):"",onClear:v,name:e.name},null,8,["placeholder","name"]),[[f.F8,s.value&&e.hasSearch]])],2),(0,a._)("div",V,[u.value?((0,a.wg)(),(0,a.iD)("div",b,[(0,a.WI)(e.$slots,"extra")])):(0,a.kq)("",!0),((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(e.options,(e=>((0,a.wg)(),(0,a.j4)(_.Z,{key:e.value,option:e,checked:(0,r.SU)(i)?.value==e.value,onSelect:p},null,8,["option","checked"])))),128))])],2)),[[l,m]])}}});const Z=q;var j=Z,x=l(3178);const C={class:"filters-item"};var F=(0,a.aZ)({__name:"EcommTransactionFilterItem",props:(0,a.Vf)({item:{},optionsList:{}},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(e){const t=e,l=(0,a.tT)(e,"modelValue"),n=(0,a.Fl)((()=>{if(!t.item.name)return[];const e=t.optionsList[t.item.id];return e?e.options?.map((e=>({value:e.value,label:e.title}))):[]}));return(e,t)=>((0,a.wg)(),(0,a.iD)("div",C,[(0,a.Wm)(h.Z,{shadow:!0,small:"",label:e.item.name},{default:(0,a.w5)((()=>["text"===e.item.type?((0,a.wg)(),(0,a.j4)(w.Z,{key:0,name:"q",modelValue:l.value,"onUpdate:modelValue":t[0]||(t[0]=e=>l.value=e),size:"sm"},null,8,["modelValue"])):(0,a.kq)("",!0),"select"===e.item.type?((0,a.wg)(),(0,a.j4)(j,{key:1,modelValue:l.value,"onUpdate:modelValue":t[1]||(t[1]=e=>l.value=e),options:n.value,name:e.item.name,hasSearch:!1},null,8,["modelValue","options","name"])):(0,a.kq)("",!0),"dateTime"===e.item.type?((0,a.wg)(),(0,a.j4)(x.Z,{key:2,modelValue:l.value,"onUpdate:modelValue":t[2]||(t[2]=e=>l.value=e)},null,8,["modelValue"])):(0,a.kq)("",!0)])),_:1},8,["label"])]))}});const T=F;var D=T;const E={key:0,class:"filters terminal-filters"},S={class:"filters-row"},U={class:"filters-actions"};var H=(0,a.aZ)({__name:"EcommTransactionFilters",emits:["update:filters"],setup(e,{emit:t}){const l=t,i=(0,o.yj)(),u=(0,o.tv)(),c=(0,p.c)(),d=(0,a.Fl)((()=>c.transactionsRefs?.optionLists)),m=(0,a.Fl)((()=>c.transactionsRefs?.filters)),h=m.value.reduce(((e,t)=>{const l=t.type,a={dateTime:(0,s.W)(new Date),select:null,text:null};return a[l]&&(e[t.id]=a[l]),e}),{});let w=(0,r.qj)({...h,...i.query});(0,a.bv)((()=>{w={...w,...i.query}}));const f=()=>{u.replace({path:i.path,query:w}),l("update:filters",w)};return(e,t)=>Boolean(m.value?.length)?((0,a.wg)(),(0,a.iD)("div",E,[(0,a._)("div",S,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(m.value,(e=>((0,a.wg)(),(0,a.j4)(D,{modelValue:(0,r.SU)(w)[e.id],"onUpdate:modelValue":t=>(0,r.SU)(w)[e.id]=t,key:e.id,item:e,optionsList:d.value},null,8,["modelValue","onUpdate:modelValue","item","optionsList"])))),128)),(0,a._)("div",U,[(0,a.Wm)(v.Z,{"has-max-width":!1,type:"button",onClick:f},{text:(0,a.w5)((()=>[(0,a.Uk)((0,n.zw)(e.$t("Фільтрувати")),1)])),_:1})])])])):(0,a.kq)("",!0)}});const P=H;var W=P,B=l(3e3),L=l(8841),M=l(2240),$=l(1002),R=(0,a.aZ)({__name:"EcommTransactionsTable",setup(e){const t=(0,p.c)(),l=m(),n=(0,a.Fl)((()=>l.total)),o=(0,a.Fl)((()=>l.transactions)),s=(0,a.Fl)((()=>t.transactionsRefs)),i=(0,B.Cl)(),u=(0,a.Fl)((()=>s.value.fields?s.value.fields.filter((e=>!e.additional)).map(((e,t)=>i.accessor(e.name,{cell:e=>{if(0===t){const t=e.getValue(),l=e.row.getIsExpanded(),n=e.row.getToggleExpandedHandler();return(0,M.A)((0,a.h)($.Z,{value:t?.toString()},t),l,n)}return e.getValue()},header:e.name}))):[]));return(e,t)=>Boolean(u.value.length)?((0,a.wg)(),(0,a.j4)(L.Z,{key:0,data:o.value,columns:u.value,empty:e.empty,"has-export":!0,total:n.value,hasPagination:!0},null,8,["data","columns","empty","total"])):(0,a.kq)("",!0)}});const z=R;var I=z,A=(0,a.aZ)({__name:"ListEcommTransactionsView",setup(e){const t=(0,o.yj)(),l=m(),u=(0,p.c)(),r=(0,a.Fl)((()=>u.transactionsRefs)),c=()=>l.getEcommTransactions(r.value,{...t.query,from_add_time:t.query.from_add_time||(0,s.W)(new Date),until_add_time:t.query.until_add_time||(0,s.W)(new Date),page:t.query.page||0,perPage:t.query.perPage||10,system:t.params.id});return(0,a.bv)((async()=>{await u.getEcommTransactionsRefs(t.params.id),await c()})),(e,t)=>((0,a.wg)(),(0,a.j4)(i.Z,null,{appTitle:(0,a.w5)((()=>[(0,a.Uk)((0,n.zw)(e.$t("Перегляд транзакцій")),1)])),appContent:(0,a.w5)((()=>[Boolean(r.value)?((0,a.wg)(),(0,a.j4)(W,{key:0,"onUpdate:filters":c})):(0,a.kq)("",!0),Boolean(r.value)?((0,a.wg)(),(0,a.j4)(I,{key:1})):(0,a.kq)("",!0)])),_:1}))}});const K=A;var Q=K}}]);
//# sourceMappingURL=1007.e3df4f6d.js.map
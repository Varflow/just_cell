"use strict";(self["webpackChunkjust_sell"]=self["webpackChunkjust_sell"]||[]).push([[2406],{2619:function(e,t,a){a.d(t,{Z:function(){return u}});var l=a(3396),o=a(7139);const n=["type","placeholder","name","required","value","disabled"],s=(0,l.aZ)({emits:["update:modelValue","blur"],methods:{input(e){const t=e.target?.value;this.$emit("update:modelValue",t)}}});var r=(0,l.aZ)({...s,__name:"InputField",props:{name:{},type:{},placeholder:{},required:{type:Boolean},size:{default:"lg"},variant:{default:"default"},modelValue:{},disabled:{}},setup(e){return(e,t)=>((0,l.wg)(),(0,l.iD)("input",{type:e.type,placeholder:e.placeholder?e.$t(e.placeholder):"",name:e.name,required:e.required,class:(0,o.C_)([`form-field__input--${e.size} form-field__input--${e.variant}`,"form-field__input"]),value:e.modelValue,disabled:e.disabled,onInput:t[0]||(t[0]=t=>e.input(t)),onBlur:t[1]||(t[1]=t=>e.$emit("blur"))},null,42,n))}});const i=r;var u=i},6931:function(e,t,a){a.d(t,{Z:function(){return h}});var l=a(3396),o=a(7139),n=a(9242);function s(e,t,a,s,r,i){return(0,l.wg)(),(0,l.iD)("form",{class:(0,o.C_)(e.classNames),onSubmit:[t[0]||(t[0]=(0,n.iM)((()=>{}),["prevent"])),t[1]||(t[1]=(0,n.iM)((()=>{}),["stop"])),t[2]||(t[2]=(...t)=>e.onSubmit&&e.onSubmit(...t))]},[(0,l.WI)(e.$slots,"fields",{values:e.values,errors:e.errors,hasErrors:e.hasErrors,validateAt:e.validateAt,ref:"slot"})],34)}var r=a(8086),i=a.n(r);const u=async(e,t)=>{let a={};try{await t.validate(e,{abortEarly:!1}),a={}}catch(l){l.inner.forEach((e=>{const t=e.path,l=e.message;i()(a,t,l)}))}return a},d=async(e,t,a)=>{let l="";try{await a.validateAt(e,t)}catch(o){l=o.message}return l};var m=(0,l.aZ)({emits:["submit"],props:{classNames:{type:String,required:!1},initialValues:{type:Object,required:!0},schema:{required:!1}},data(){return{values:this.initialValues,errors:{}}},computed:{hasErrors(){return Boolean(Object.keys(this.errors).length>0)}},watch:{initialValues(e){this.values=e},errors(e){const t=Object.keys(e)[0],a=document.querySelector(`[name="${t}"]`);if(!a)return;const l=20,o=a.getBoundingClientRect().top-l;window.scrollTo({top:o}),a.focus()}},methods:{async onSubmit(){const e=await this.validate();e&&this.$emit("submit",this.values)},async validate(){return this.schema?(this.errors=await u(this.values,this.schema),Boolean(Object.keys(this.errors).length<=0)):(console.error("Validation schema doen't provided"),!0)},async validateAt(e){if(!this.schema)return console.error("Validation schema doen't provided"),!0;const t=await d(e,this.values,this.schema);i()(this.errors,e,t)}}}),c=a(89);const p=(0,c.Z)(m,[["render",s]]);var h=p},2322:function(e,t,a){a.r(t),a.d(t,{default:function(){return h}});var l=a(3396),o=a(7139);function n(e,t,a,n,s,r){const i=(0,l.up)("app-loading"),u=(0,l.up)("route-form"),d=(0,l.up)("app-layout");return(0,l.wg)(),(0,l.j4)(d,null,{appTitle:(0,l.w5)((()=>[(0,l.Uk)((0,o.zw)(e.$t("Додати маршрут")),1)])),appLoading:(0,l.w5)((()=>[(0,l.Wm)(i,{loading:!1})])),appContent:(0,l.w5)((()=>[(0,l.Wm)(u,{onSubmit:e.createTransport},null,8,["onSubmit"])])),_:1})}var s=a(8231),r=a(7863),i=a(64),u=a(5837),d=a(4677),m=(0,l.aZ)({inject:["rules"],components:{AppLayout:s.Z,AppLoading:r.Z,RouteForm:i.Z},data(){return{canEdit:!1}},computed:{loading(){return this.$store.state.routes.loading}},async mounted(){this.$store.dispatch(u.V.GET_ROUTES)},setup(){const e=(0,d.pm)();return{toast:e}},methods:{createTransport(e){this.$store.dispatch(u.V.CREATE_ROUTE,{payload:e,toast:this.toast})}}}),c=a(89);const p=(0,c.Z)(m,[["render",n]]);var h=p},64:function(e,t,a){a.d(t,{Z:function(){return $}});var l=a(3396),o=a(7139);const n={class:"terminal-form__container"},s={class:"form-actions form-actions--fixed"};function r(e,t,a,r,i,u){const d=(0,l.up)("input-field"),m=(0,l.up)("form-field"),c=(0,l.up)("v-map"),p=(0,l.up)("route-prices"),h=(0,l.up)("v-button"),v=(0,l.up)("v-form");return(0,l.wg)(),(0,l.iD)("div",n,[(0,l.Wm)(v,{action:"#",class:"terminal-form","initial-values":e.initialValues,onSubmit:e.onSubmit},{fields:(0,l.w5)((({values:t})=>[(0,l.Wm)(m,{label:"Назва"},{default:(0,l.w5)((()=>[(0,l.Wm)(d,{modelValue:t.name,"onUpdate:modelValue":e=>t.name=e,name:"name",type:"text",placeholder:"Введіть назву маршрута"},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1024),(0,l.Wm)(m,{label:"Держава"},{default:(0,l.w5)((()=>[(0,l.Wm)(d,{modelValue:t.country,"onUpdate:modelValue":e=>t.country=e,name:"name",type:"text",placeholder:"Введіть державу"},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1024),(0,l.Wm)(m,{label:"Місто"},{default:(0,l.w5)((()=>[(0,l.Wm)(d,{modelValue:t.city,"onUpdate:modelValue":e=>t.city=e,name:"name",type:"text",placeholder:"Введіть місто"},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1024),(0,l.Wm)(m,{label:"Вартість проїзду"},{default:(0,l.w5)((()=>[(0,l.Wm)(d,{modelValue:t.cost,"onUpdate:modelValue":e=>t.cost=e,name:"name",type:"text",placeholder:"Введіть вартість проїзду"},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1024),(0,l.Wm)(c,{modelValue:t.places,"onUpdate:modelValue":e=>t.places=e,hasAddressAutocomplete:!0,hasPlaceActions:!0},null,8,["modelValue","onUpdate:modelValue"]),(0,l.Wm)(p,{places:t.places},null,8,["places"]),(0,l._)("div",s,[(0,l.Wm)(h,{type:"submit",loading:e.loading},{text:(0,l.w5)((()=>[(0,l.Uk)((0,o.zw)(e.$t("Додати ТС")),1)])),_:1},8,["loading"])])])),_:1},8,["initial-values","onSubmit"])])}var i=a(4677),u=a(4560),d=a(2619),m=a(4610),c=a(6931),p=a(8004);const h={class:"container"},v={class:"record-item"},f={class:"record-item"},V={class:"record-item"},b=["onClick"];function y(e,t,a,o,n,s){const r=(0,l.up)("select-field"),i=(0,l.up)("input-field"),u=(0,l.up)("form-field");return(0,l.wg)(),(0,l.j4)(u,{label:"Cітка цін"},{default:(0,l.w5)((()=>[(0,l._)("div",h,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.records,((a,o)=>((0,l.wg)(),(0,l.iD)("div",{class:"record",key:o},[(0,l._)("div",v,[(0,l.Wm)(r,{options:e.options,hasSearch:!1,inputPlaceholder:"З точки",modelValue:a.from,"onUpdate:modelValue":e=>a.from=e},null,8,["options","modelValue","onUpdate:modelValue"])]),(0,l._)("div",f,[(0,l.Wm)(r,{options:e.options,hasSearch:!1,modelValue:a.to,"onUpdate:modelValue":e=>a.to=e,inputPlaceholder:"По точку"},null,8,["options","modelValue","onUpdate:modelValue"])]),(0,l._)("div",V,[(0,l.Wm)(i,{modelValue:a.cost,"onUpdate:modelValue":e=>a.cost=e,placeholder:"Ціна"},null,8,["modelValue","onUpdate:modelValue"])]),e.canRemove?((0,l.wg)(),(0,l.iD)("div",{key:0,class:"button",onClick:t=>e.remove(o)},"-",8,b)):(0,l.kq)("",!0),e.canAdd&&e.records.length-1===o?((0,l.wg)(),(0,l.iD)("div",{key:1,class:"button",onClick:t[0]||(t[0]=(...t)=>e.add&&e.add(...t))}," + ")):(0,l.kq)("",!0)])))),128))])])),_:1})}a(7658);var _=a(2946),w=(0,l.aZ)({props:["label","values","name","places"],components:{FormField:u.Z,SelectField:_.Z,InputField:d.Z},data(){return{records:[{from:"",to:"",cost:""}],options:[],canAdd:!0,canRemove:!1}},watch:{places:{handler(e){e?.length&&(this.options=e.map((e=>({value:e.name,label:e.name}))))}},"records.length":{handler(e){this.canRemove=e>1},immediate:!0}},methods:{add(){this.records.push({from:"",to:"",cost:""})},remove(e){this.records=this.records.filter(((t,a)=>a!==e))}}}),g=a(89);const Z=(0,g.Z)(w,[["render",y],["__scopeId","data-v-c0e5da42"]]);var U=Z;const W={id:"",route:"",name:"",terminal_num:"",transport_num:"",drive_time:"",notify:[],next_to_date:""};var k=(0,l.aZ)({props:["defaultValues"],emits:["submit"],components:{FormField:u.Z,InputField:d.Z,VButton:m.Z,VForm:c.Z,RoutePrices:U,VMap:p.Z},setup(){const e=(0,i.pm)();return{toast:e}},data(){return{initialValues:this.defaultValues||W}},watch:{defaultValues(e){this.initialValues={...this.initialValues,...e}}},computed:{loading(){return!1}},methods:{onSubmit(e){this.$emit("submit",e)}}});const S=(0,g.Z)(k,[["render",r]]);var $=S}}]);
//# sourceMappingURL=2406.1c332aad.js.map
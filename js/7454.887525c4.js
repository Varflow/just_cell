"use strict";(self["webpackChunkjust_sell"]=self["webpackChunkjust_sell"]||[]).push([[7454],{2619:function(e,t,a){a.d(t,{Z:function(){return d}});var l=a(3396),i=a(7139);const n=["type","placeholder","name","required","value","disabled"],o=(0,l.aZ)({emits:["update:modelValue","blur"],methods:{input(e){const t=e.target?.value;this.$emit("update:modelValue",t)}}});var r=(0,l.aZ)({...o,__name:"InputField",props:{name:{},type:{},placeholder:{},required:{type:Boolean},size:{default:"lg"},variant:{default:"default"},modelValue:{},disabled:{}},setup(e){return(e,t)=>((0,l.wg)(),(0,l.iD)("input",{type:e.type,placeholder:e.placeholder?e.$t(e.placeholder):"",name:e.name,required:e.required,class:(0,i.C_)([`form-field__input--${e.size} form-field__input--${e.variant}`,"form-field__input"]),value:e.modelValue,disabled:e.disabled,onInput:t[0]||(t[0]=t=>e.input(t)),onBlur:t[1]||(t[1]=t=>e.$emit("blur"))},null,42,n))}});const s=r;var d=s},6686:function(e,t,a){a.d(t,{Z:function(){return d}});var l=a(3396),i=a(7139);const n=["placeholder","name","required","value","disabled","maxlength"],o=(0,l.aZ)({emits:["update:modelValue","update:selection"],inject:["rules"],data(){return{canEdit:!1}},mounted(){this.canEdit=Boolean(null!==this.rules),document.addEventListener("selectionchange",this.onSelectionChange)},methods:{input(e){const t=e.target?.value;this.$emit("update:modelValue",t)},onTabPressed(e){const t=this.$refs.textarea;let a=e.target.value;if("Tab"==e.key){e.preventDefault();const l=t.selectionStart,i=t.selectionEnd;e.target.value=a.substring(0,l)+"\t"+a.substring(i),t.selectionStart=t.selectionEnd=l+1,this.$emit("update:modelValue",a)}},onSelectionChange(){const e=document.activeElement,t=this.$refs.textarea;if(e&&e===t){const t={start:e.selectionStart,end:e.selectionEnd};this.$emit("update:selection",t)}}}});var r=(0,l.aZ)({...o,__name:"TextareaField",props:{name:{},placeholder:{},required:{type:Boolean},size:{default:"lg"},variant:{default:"default"},modelValue:{},disabled:{},maxLength:{}},setup(e){return(e,t)=>((0,l.wg)(),(0,l.iD)("textarea",{ref:"textarea",placeholder:e.placeholder?e.$t(e.placeholder):"",name:e.name,required:e.required,class:(0,i.C_)(["form-field__input form-field__textarea",`form-field__input--${e.size} form-field__input--${e.variant}`]),value:e.modelValue,disabled:void 0!==e.disabled?e.disabled:!e.canEdit,onInput:t[0]||(t[0]=t=>e.input(t)),onKeydown:t[1]||(t[1]=(...t)=>e.onTabPressed&&e.onTabPressed(...t)),maxlength:e.maxLength},null,42,n))}});const s=r;var d=s},6842:function(e,t,a){a.d(t,{Z:function(){return E}});var l=a(3396),i=a(9242),n=a(7139),o=a.p+"img/chevron-top.161f73c2.svg",r=a.p+"img/chevron-bottom.4aa9eec8.svg";const s={class:"timepicker",ref:"timepicker"},d={class:"timepicker-dropdown__title"},u={class:"timepicker-dropdown__row"},m={class:"timepicker-dropdown__values"},c=(0,l._)("img",{src:o,alt:"Top",class:"timepicker-dropdown__icon"},null,-1),p=[c],h={class:"timepicker-dropdown__value"},_=(0,l._)("img",{src:r,alt:"Bottom",class:"timepicker-dropdown__icon"},null,-1),f=[_],v=(0,l._)("div",{class:"timepicker-dropdown__delimetr"},":",-1),b={class:"timepicker-dropdown__values"},V={class:"timepicker-dropdown__value"};function g(e,t,a,c,_,g){const w=(0,l.up)("form-field"),k=(0,l.Q2)("click-outside");return(0,l.wg)(),(0,l.j4)(w,{label:e.label},{default:(0,l.w5)((()=>[(0,l.wy)(((0,l.wg)(),(0,l.iD)("div",s,[(0,l._)("div",{class:"timepicker-field",onClick:t[1]||(t[1]=(...t)=>e.toggle&&e.toggle(...t))},[(0,l.wy)((0,l._)("input",{type:"text",name:"time",class:"timepicker-field__input","onUpdate:modelValue":t[0]||(t[0]=t=>e.time=t),readonly:""},null,512),[[i.nr,e.time]])]),(0,l._)("div",{class:(0,n.C_)(["timepicker-dropdown",{opened:e.opened}])},[(0,l._)("h4",d,(0,n.zw)(e.$t("Оберіть час")),1),(0,l._)("div",u,[(0,l._)("div",m,[(0,l._)("div",{class:"timepicker-dropdown__icon",onClick:t[2]||(t[2]=t=>e.increment("hour"))},p),(0,l._)("div",h,(0,n.zw)(e.formattedHour),1),(0,l._)("div",{class:"timepicker-dropdown__icon",onClick:t[3]||(t[3]=t=>e.decrement("hour"))},f)]),v,(0,l._)("div",b,[(0,l._)("img",{src:o,alt:"Top",class:"timepicker-dropdown__icon",onClick:t[4]||(t[4]=t=>e.increment("minuts"))}),(0,l._)("div",V,(0,n.zw)(e.formattedMinuts),1),(0,l._)("img",{src:r,alt:"Bottom",class:"timepicker-dropdown__icon",onClick:t[5]||(t[5]=t=>e.decrement("minuts"))})])])],2)])),[[k,e.close]])])),_:1},8,["label"])}var w=a(4560);const k=23,y=58,Z=e=>e<9?`0${e+1}`:`${e+1}`;var $=(0,l.aZ)({emits:["update:modelValue"],props:["modelValue","label"],components:{FormField:w.Z},data(){return{opened:!1,hour:0,minuts:0,time:"00:00"}},computed:{formattedHour(){return Z(this.hour)},formattedMinuts(){return Z(this.minuts)}},watch:{hour(){this.time=this.formattedHour+":"+this.formattedMinuts,this.$emit("update:modelValue",this.time)},minuts(){this.time=this.formattedHour+":"+this.formattedMinuts,this.$emit("update:modelValue",this.time)}},methods:{increment(e){const t=this[e],a="hour"===e&&t<k,l="minuts"===e&&t<y;(a||l)&&(this[e]=t+1)},decrement(e){const t=this[e];t>0&&(this[e]=t-1)},toggle(){this.opened=!this.opened},close(){this.opened=!1}}}),S=a(89);const T=(0,S.Z)($,[["render",g]]);var E=T},9694:function(e,t,a){a.d(t,{Z:function(){return m}});var l=a(3396);const i={class:"timepicker-range-field"},n=(0,l._)("div",{class:"timepicker-range__delimetr"},"-",-1);function o(e,t,a,o,r,s){const d=(0,l.up)("timepicker-field");return(0,l.wg)(),(0,l.iD)("div",i,[(0,l.Wm)(d,{label:a.labelFrom},null,8,["label"]),n,(0,l.Wm)(d,{label:a.labelTo},null,8,["label"])])}var r=a(6842),s={props:["labelFrom","labelTo"],components:{TimepickerField:r.Z}},d=a(89);const u=(0,d.Z)(s,[["render",o]]);var m=u},6931:function(e,t,a){a.d(t,{Z:function(){return h}});var l=a(3396),i=a(7139),n=a(9242);function o(e,t,a,o,r,s){return(0,l.wg)(),(0,l.iD)("form",{class:(0,i.C_)(e.classNames),onSubmit:[t[0]||(t[0]=(0,n.iM)((()=>{}),["prevent"])),t[1]||(t[1]=(0,n.iM)((()=>{}),["stop"])),t[2]||(t[2]=(...t)=>e.onSubmit&&e.onSubmit(...t))]},[(0,l.WI)(e.$slots,"fields",{values:e.values,errors:e.errors,hasErrors:e.hasErrors,validateAt:e.validateAt,ref:"slot"})],34)}var r=a(8086),s=a.n(r);const d=async(e,t)=>{let a={};try{await t.validate(e,{abortEarly:!1}),a={}}catch(l){l.inner.forEach((e=>{const t=e.path,l=e.message;s()(a,t,l)}))}return a},u=async(e,t,a)=>{let l="";try{await a.validateAt(e,t)}catch(i){l=i.message}return l};var m=(0,l.aZ)({emits:["submit"],props:{classNames:{type:String,required:!1},initialValues:{type:Object,required:!0},schema:{required:!1}},data(){return{values:this.initialValues,errors:{}}},computed:{hasErrors(){return Boolean(Object.keys(this.errors).length>0)}},watch:{initialValues(e){this.values=e},errors(e){const t=Object.keys(e)[0],a=document.querySelector(`[name="${t}"]`);if(!a)return;const l=20,i=a.getBoundingClientRect().top-l;window.scrollTo({top:i}),a.focus()}},methods:{async onSubmit(){const e=await this.validate();e&&this.$emit("submit",this.values)},async validate(){return this.schema?(this.errors=await d(this.values,this.schema),Boolean(Object.keys(this.errors).length<=0)):(console.error("Validation schema doen't provided"),!0)},async validateAt(e){if(!this.schema)return console.error("Validation schema doen't provided"),!0;const t=await u(e,this.values,this.schema);s()(this.errors,e,t)}}}),c=a(89);const p=(0,c.Z)(m,[["render",o]]);var h=p},508:function(e,t,a){a.r(t),a.d(t,{default:function(){return x}});var l=a(3396),i=a(7139);function n(e,t,a,n,o,r){const s=(0,l.up)("app-loading"),d=(0,l.up)("driver-form"),u=(0,l.up)("app-layout");return(0,l.wg)(),(0,l.j4)(u,null,{appTitle:(0,l.w5)((()=>[(0,l.Uk)((0,i.zw)(e.$t("Додати водія")),1)])),appLoading:(0,l.w5)((()=>[(0,l.Wm)(s,{loading:!1})])),appContent:(0,l.w5)((()=>[(0,l.Wm)(d,{onSubmit:e.createDriver},null,8,["onSubmit"])])),_:1})}var o=a(8231),r=a(7863);const s={class:"terminal-form__container"},d={class:"form-actions form-actions--fixed"};function u(e,t,a,n,o,r){const u=(0,l.up)("input-field"),m=(0,l.up)("form-field"),c=(0,l.up)("route-select-field"),p=(0,l.up)("transport-select-field"),h=(0,l.up)("timepicker-range"),_=(0,l.up)("textarea-field"),f=(0,l.up)("v-button"),v=(0,l.up)("v-form");return(0,l.wg)(),(0,l.iD)("div",s,[(0,l.Wm)(v,{action:"#",class:"terminal-form","initial-values":e.initialValues,onSubmit:e.onSubmit},{fields:(0,l.w5)((({values:t})=>[(0,l.Wm)(m,{label:"ПІБ*:"},{default:(0,l.w5)((()=>[(0,l.Wm)(u,{modelValue:t.name,"onUpdate:modelValue":e=>t.name=e,name:"name",type:"text",placeholder:"Введіть ПІБ водія"},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1024),(0,l.Wm)(m,{label:"Табельний номер"},{default:(0,l.w5)((()=>[(0,l.Wm)(u,{modelValue:t.tabulation_number,"onUpdate:modelValue":e=>t.tabulation_number=e,name:"name",type:"text",placeholder:"Введіть табельний номер"},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1024),(0,l.Wm)(c,{modelValue:t.route,"onUpdate:modelValue":e=>t.route=e},null,8,["modelValue","onUpdate:modelValue"]),(0,l.Wm)(p,{modelValue:t.transport_number,"onUpdate:modelValue":e=>t.transport_number=e},null,8,["modelValue","onUpdate:modelValue"]),(0,l.Wm)(h,{modelValue:t.session_open_time,"onUpdate:modelValue":e=>t.session_open_time=e,labelFrom:"Час початку зміни",labelTo:"Час завершення зміни"},null,8,["modelValue","onUpdate:modelValue"]),(0,l.Wm)(m,{label:"Телефон"},{default:(0,l.w5)((()=>[(0,l.Wm)(u,{modelValue:t.phone,"onUpdate:modelValue":e=>t.phone=e,name:"name",type:"text",placeholder:"Введіть телефон"},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1024),(0,l.Wm)(m,{label:"Додадкова інформація"},{default:(0,l.w5)((()=>[(0,l.Wm)(_,{modelValue:t.add_data,"onUpdate:modelValue":e=>t.add_data=e,name:"name",type:"text",placeholder:"Введіть державний номер ТС"},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1024),(0,l._)("div",d,[(0,l.Wm)(f,{type:"submit",loading:e.loading},{text:(0,l.w5)((()=>[(0,l.Uk)((0,i.zw)(e.$t("Додати водія")),1)])),_:1},8,["loading"])])])),_:1},8,["initial-values","onSubmit"])])}var m=a(4677),c=a(4560),p=a(2619),h=a(4610),_=a(6931),f=a(9694),v=a(6686),b=a(585),V=a(2028);const g={id:"",name:"",route:"",phone:"",transport_number:"",tabulation_number:"",open_session_time:"",add_data:""};var w=(0,l.aZ)({props:["defaultValues"],emits:["submit"],components:{FormField:c.Z,InputField:p.Z,VButton:h.Z,VForm:_.Z,RouteSelectField:V.pV,TimepickerRange:f.Z,TransportSelectField:b.PO,TextareaField:v.Z},setup(){const e=(0,m.pm)();return{toast:e}},data(){return{initialValues:this.defaultValues||g}},watch:{defaultValues(e){this.initialValues={...this.initialValues,...e}}},computed:{loading(){return!1}},methods:{onSubmit(e){this.$emit("submit",e)}}}),k=a(89);const y=(0,k.Z)(w,[["render",u]]);var Z=y,$=a(1781),S=a(7941),T=(0,l.aZ)({inject:["rules"],components:{AppLayout:o.Z,AppLoading:r.Z,DriverForm:Z},data(){return{canEdit:!1}},computed:{loading(){return this.$store.state.transport.loading}},async mounted(){this.$store.dispatch($.c.GET_DRIVERS),this.$store.dispatch(S.K.GET_TRANSPORTS)},setup(){const e=(0,m.pm)();return{toast:e}},methods:{createDriver(e){this.$store.dispatch($.c.CREATE_DRIVER,{payload:e,toast:this.toast})}}});const E=(0,k.Z)(T,[["render",n]]);var x=E}}]);
//# sourceMappingURL=7454.887525c4.js.map
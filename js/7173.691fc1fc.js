"use strict";(self["webpackChunkjust_sell"]=self["webpackChunkjust_sell"]||[]).push([[7173],{7359:function(e,t,a){a.d(t,{X:function(){return p}});a(7658);var l=a(2578),s=a(7547),i=a(473),n=a(8818),o=a(3093);const r=async()=>{const{data:e}=await s.d.get(i.M.GET_POINTS);return e},d=async e=>{const t={...e,sign:await(0,n.Xx)({fiscal_name:e.fiscal_name,fiscal_pass:e.fiscal_pass},(0,o.LP)())},{data:a}=await s.d.postForm(i.M.UPLOAD_FISCAL_KEY,t);return a},u=async e=>{const t=e.points.map((e=>({chief_of_point:e.chief_of_point,chief_phone:e.chief_phone,close_day:e.close_day,close_time:e.close_time}))),a={...e,sign:await(0,n.ar)(t,(0,o.LP)())},{data:l}=await s.d.post(i.M.ADD_POINT,a);return l};var c=a(6581);const p=(0,l.Q_)("points",{state:()=>({loading:!1,pointsByKey:[],points:[]}),actions:{async getPoints(){this.loading=!0;const e=await r();0===e.code&&(this.points=e.data?.map((e=>({...e,is_fiscal:e.is_fiscal?JSON.parse(e.is_fiscal)?"Так":"Ні":"",is_test:e.is_test?JSON.parse(e.is_test)?"Так":"Ні":"",subRows:[{ID:e.id,"Назва":e.POINT_NAME,"Адреса":e.POINT_ADDRESS}]})))),this.loading=!1},async uploadFiscalKey(e){const t=await d(e);0===t.code&&(this.pointsByKey=t.data,c.Z.push({name:"fiscalAdd"}))},async craetePoints(e){const t=await u(e);0===t.code&&(this.pointsByKey=t.data)}}})},2572:function(e,t,a){a.d(t,{Z:function(){return _}});var l=a(3396),s=a(7139);const i={class:"file-field"},n=["accept","name"],o={class:"file-field__label"},r={key:0,class:"file-field__value"},d={class:"file-field__preview"},u=["src"];function c(e,t,a,c,p,m){return(0,l.wg)(),(0,l.iD)("div",i,[(0,l._)("input",{ref:"fileInput",type:"file",hidden:"",accept:e.accept,name:e.name,onChange:t[0]||(t[0]=(...t)=>e.selectFile&&e.selectFile(...t))},null,40,n),(0,l._)("div",o,[(0,l.Uk)((0,s.zw)(e.label)+" ",1),e.file?((0,l.wg)(),(0,l.iD)("div",r,(0,s.zw)(e.fileName),1)):(0,l.kq)("",!0)]),(0,l._)("div",d,[e.canShowPreview?((0,l.wg)(),(0,l.iD)("img",{key:0,src:e.preview,class:"file-field__preview-img"},null,8,u)):(0,l.kq)("",!0),(0,l._)("button",{class:"file-field__button",type:"button",onClick:t[1]||(t[1]=(...t)=>e.openFileSelector&&e.openFileSelector(...t))},(0,s.zw)(e.$t("Завантажити файл")),1)])])}const p=["png","jpeg","jgp"],m=e=>{const t=e.split(".");return t[t.length-1]},f=e=>{const t=m(e.name);return p.includes(t)};var h=(0,l.aZ)({emits:["update:modelValue"],props:["modelValue","name","label","accept"],data(){return{file:this.modelValue||null}},computed:{canShowPreview(){return null!==this.file&&f(this.file)},preview(){return this.file?URL.createObjectURL(this.file):""},fileName(){if(!this.file)return"";const e=this.file?.name;return e?.length<=25?e:`${e?.slice(0,15)}...`}},watch:{file(e){this.$emit("update:modelValue",e)}},methods:{openFileSelector(){const e=this.$refs.fileInput;e.click()},selectFile(e){const t=e.target;this.file=t.files[0]}}}),w=a(89);const v=(0,w.Z)(h,[["render",c]]);var _=v},2619:function(e,t,a){a.d(t,{Z:function(){return d}});var l=a(3396),s=a(7139);const i=["type","placeholder","name","required","value","disabled"],n=(0,l.aZ)({emits:["update:modelValue","blur"],methods:{input(e){const t=e.target?.value;this.$emit("update:modelValue",t)}}});var o=(0,l.aZ)({...n,__name:"InputField",props:{name:{},type:{},placeholder:{},required:{type:Boolean},size:{default:"lg"},variant:{default:"default"},modelValue:{},disabled:{}},setup(e){return(e,t)=>((0,l.wg)(),(0,l.iD)("input",{type:e.type,placeholder:e.placeholder?e.$t(e.placeholder):"",name:e.name,required:e.required,class:(0,s.C_)([`form-field__input--${e.size} form-field__input--${e.variant}`,"form-field__input"]),value:e.modelValue,disabled:e.disabled,onInput:t[0]||(t[0]=t=>e.input(t)),onBlur:t[1]||(t[1]=t=>e.$emit("blur"))},null,42,i))}});const r=o;var d=r},4795:function(e,t,a){a.d(t,{Z:function(){return S}});var l=a(3396);const s=["type","placeholder","name","required","value"],i={class:"form-field__extra-container"};function n(e,t,a,n,o,r){const d=(0,l.up)("password-visibility-button"),u=(0,l.up)("password-generate-button");return(0,l.wg)(),(0,l.iD)(l.HY,null,[(0,l._)("input",{type:e.type,placeholder:e.placeholder?e.$t(e.placeholder):"",name:e.name,required:e.required,value:e.password,class:"form-field__input",onInput:t[0]||(t[0]=t=>e.input(t)),onBlur:t[1]||(t[1]=t=>e.$emit("blur"))},null,40,s),(0,l._)("div",i,[(0,l.Wm)(d,{onChange:e.changeType},null,8,["onChange"]),e.hasGenerateButton?((0,l.wg)(),(0,l.j4)(u,{key:0,onGeneratedPassword:e.onGeneratePassword},null,8,["onGeneratedPassword"])):(0,l.kq)("",!0)])],64)}var o=a.p+"img/eye_hidden.08669155.svg",r=a.p+"img/eye_visible.cfc84e83.svg";const d={key:0,src:o,alt:"Show\n    password"},u={key:1,src:r,alt:"Show\n    password"};function c(e,t,a,s,i,n){return(0,l.wg)(),(0,l.iD)("button",{type:"button",class:"form-field__extra password-visibility-button",tabindex:"-1",onClick:t[0]||(t[0]=(...t)=>e.changeVisibility&&e.changeVisibility(...t))},[e.visibility?((0,l.wg)(),(0,l.iD)("img",u)):((0,l.wg)(),(0,l.iD)("img",d))])}var p=(0,l.aZ)({emits:["change"],data(){return{visibility:!1}},watch:{visibility(e){const t=e?"text":"password";this.$emit("change",t)}},methods:{changeVisibility(){this.visibility=!this.visibility}}}),m=a(89);const f=(0,m.Z)(p,[["render",c]]);var h=f,w=a.p+"img/key_icon.9e7583e7.svg";const v=(0,l._)("img",{src:w,alt:"Generate"},null,-1),_=[v];function b(e,t,a,s,i,n){return(0,l.wg)(),(0,l.iD)("button",{type:"button",class:"form-field__extra password-visibility-button",tabindex:"-1",onClick:t[0]||(t[0]=(...t)=>e.generatePassword&&e.generatePassword(...t))},_)}var y=(0,l.aZ)({emits:["generatedPassword"],data(){return{generatedPassword:""}},watch:{generatedPassword(e){this.$emit("generatedPassword",e)}},methods:{generatePassword(){const e="0123456789abcdefghijklmnopqrstuvwxyz!@#$%^&*()ABCDEFGHIJKLMNOPQRSTUVWXYZ",t=15;let a="";const l=window.crypto,s=new Uint32Array(1);for(let i=0;i<t;i++){const t=l.getRandomValues(s)[0];a+=e[t%e.length]}this.generatedPassword=a}}});const g=(0,m.Z)(y,[["render",b]]);var V=g,Z=(0,l.aZ)({props:{name:{type:String,required:!0},placeholder:{type:String,required:!1},required:{type:Boolean,required:!1},hasGenerateButton:{type:Boolean,default:!1},modelValue:String},emits:["update:modelValue","blur"],components:{PasswordVisibilityButton:h,PasswordGenerateButton:V},data(){return{type:"password",password:this.modelValue||""}},watch:{modelValue(e){this.password=e}},methods:{changeType(e){this.type=e},input(e){const t=e.target?.value;this.$emit("update:modelValue",t)},onGeneratePassword(e){this.$emit("update:modelValue",e)}}});const P=(0,m.Z)(Z,[["render",n]]);var S=P},6931:function(e,t,a){a.d(t,{Z:function(){return f}});var l=a(3396),s=a(7139),i=a(9242);function n(e,t,a,n,o,r){return(0,l.wg)(),(0,l.iD)("form",{class:(0,s.C_)(e.classNames),onSubmit:[t[0]||(t[0]=(0,i.iM)((()=>{}),["prevent"])),t[1]||(t[1]=(0,i.iM)((()=>{}),["stop"])),t[2]||(t[2]=(...t)=>e.onSubmit&&e.onSubmit(...t))]},[(0,l.WI)(e.$slots,"fields",{values:e.values,errors:e.errors,hasErrors:e.hasErrors,validateAt:e.validateAt,ref:"slot"})],34)}var o=a(8086),r=a.n(o);const d=async(e,t)=>{let a={};try{await t.validate(e,{abortEarly:!1}),a={}}catch(l){l.inner.forEach((e=>{const t=e.path,l=e.message;r()(a,t,l)}))}return a},u=async(e,t,a)=>{let l="";try{await a.validateAt(e,t)}catch(s){l=s.message}return l};var c=(0,l.aZ)({emits:["submit"],props:{classNames:{type:String,required:!1},initialValues:{type:Object,required:!0},schema:{required:!1}},data(){return{values:this.initialValues,errors:{}}},computed:{hasErrors(){return Boolean(Object.keys(this.errors).length>0)}},watch:{initialValues(e){this.values=e},errors(e){const t=Object.keys(e)[0],a=document.querySelector(`[name="${t}"]`);if(!a)return;const l=20,s=a.getBoundingClientRect().top-l;window.scrollTo({top:s}),a.focus()}},methods:{async onSubmit(){const e=await this.validate();e&&this.$emit("submit",this.values)},async validate(){return this.schema?(this.errors=await d(this.values,this.schema),Boolean(Object.keys(this.errors).length<=0)):(console.error("Validation schema doen't provided"),!0)},async validateAt(e){if(!this.schema)return console.error("Validation schema doen't provided"),!0;const t=await u(e,this.values,this.schema);r()(this.errors,e,t)}}}),p=a(89);const m=(0,p.Z)(c,[["render",n]]);var f=m},9983:function(e,t,a){a.d(t,{Z:function(){return c}});var l=a(3396),s=a(9242);const i={class:"tab-pane"};function n(e,t,a,n,o,r){return(0,l.wy)(((0,l.wg)(),(0,l.iD)("div",i,[(0,l.WI)(e.$slots,"default")],512)),[[s.F8,n.isActive]])}var o=a(4870),r={props:["title"],setup(e){const t=(0,o.iH)(!1),a=(0,l.f3)("TabsProvider");return(0,l.YP)((()=>a.selectedIndex),(()=>{t.value=e.title===a.selectedIndex})),(0,l.wF)((()=>{t.value=e.title===a.selectedIndex})),{isActive:t}}},d=a(89);const u=(0,d.Z)(r,[["render",n]]);var c=u},6890:function(e,t,a){a.d(t,{Z:function(){return f}});var l=a(3396),s=a(7139);const i={class:"tabs"},n={class:"tabs-pills"},o=["onClick"],r={class:"tabs-panes"};function d(e,t,a,d,u,c){return(0,l.wg)(),(0,l.iD)("div",i,[(0,l._)("div",n,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.tabs,(t=>((0,l.wg)(),(0,l.iD)("div",{class:(0,s.C_)(["tab-pill",{active:e.selectedIndex===t.props.title}]),key:t.props.title,onClick:a=>e.selectTab(t.props.title)},(0,s.zw)(e.$t(t.props.title)),11,o)))),128))]),(0,l._)("div",r,[(0,l.WI)(e.$slots,"default")])])}var u=a(4870),c=(0,l.aZ)({setup(e,{slots:t,emit:a}){const s=(0,u.qj)({selectedIndex:null,tabs:[],count:0});(0,l.JJ)("TabsProvider",s);const i=e=>{s.selectedIndex=e,a("change",e)},n=()=>{t.default&&(s.tabs=t.default())};return(0,l.wF)((()=>n())),(0,l.Xn)((()=>n())),(0,l.bv)((()=>{i(s.tabs.at(0).props.title)})),{...(0,u.BK)(s),selectTab:i}}}),p=a(89);const m=(0,p.Z)(c,[["render",d]]);var f=m},4104:function(e,t,a){a.r(t),a.d(t,{default:function(){return P}});var l=a(3396),s=a(8231),i=a(4870),n=a(6931),o=a(4560),r=a(2619),d=a(2572),u=a(4795),c=a(4610),p=a(7359);const m={class:"app-layout-form__row"},f={class:"app-layout-form"};var h=(0,l.aZ)({__name:"UploadFiscalKey",emits:["upload"],setup(e){const t=(0,i.qj)({file:null,fiscal_num:"",fiscal_pass:""}),a=e=>{const t=(0,p.X)();t.uploadFiscalKey(e)};return(e,s)=>((0,l.wg)(),(0,l.j4)(n.Z,{initialValues:t,onSubmit:a},{fields:(0,l.w5)((({values:e})=>[(0,l._)("div",m,[(0,l._)("div",f,[(0,l.Wm)(o.Z,{shadow:"",label:"Додати ключ для підпису*:"},{default:(0,l.w5)((()=>[(0,l.Wm)(d.Z,{name:"file",label:"Ключ для підпису*:",modelValue:e.file,"onUpdate:modelValue":t=>e.file=t},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1024),(0,l.Wm)(o.Z,{shadow:"",label:"Фіскальний номер реєстратора*:"},{default:(0,l.w5)((()=>[(0,l.Wm)(r.Z,{name:"name",modelValue:e.fiscal_num,"onUpdate:modelValue":t=>e.fiscal_num=t},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1024),(0,l.Wm)(o.Z,{shadow:"",label:"Пароль ключа*:"},{default:(0,l.w5)((()=>[(0,l.Wm)(u.Z,{name:"password",modelValue:e.fiscal_pass,"onUpdate:modelValue":t=>e.fiscal_pass=t},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1024)])]),(0,l.Wm)(c.Z,{type:"submit"},{text:(0,l.w5)((()=>[(0,l.Uk)("Додати")])),_:1})])),_:1},8,["initialValues"]))}});const w=h;var v=w,_=a(9830),b=a(6890),y=a(9983);const g={class:"department-content"};var V=(0,l.aZ)({__name:"CreatePointPage",setup(e){return(e,t)=>((0,l.wg)(),(0,l.j4)(s.Z,null,{appTitle:(0,l.w5)((()=>[(0,l.Uk)("Додати нову точку/відділення")])),appContent:(0,l.w5)((()=>[(0,l._)("div",g,[(0,l.Wm)(b.Z,null,{default:(0,l.w5)((()=>[(0,l.Wm)(y.Z,{title:"Фіскальна"},{default:(0,l.w5)((()=>[(0,l.Wm)(v)])),_:1}),(0,l.Wm)(y.Z,{title:"Не фіскальна"},{default:(0,l.w5)((()=>[(0,l.Wm)(_.Z)])),_:1})])),_:1})])])),_:1}))}});const Z=V;var P=Z},9830:function(e,t,a){a.d(t,{Z:function(){return h}});var l=a(3396);const s={class:"app-layout-form"},i={class:"app-layout-form__actions"};function n(e,t,a,n,o,r){const d=(0,l.up)("input-field"),u=(0,l.up)("form-field"),c=(0,l.up)("select-field"),p=(0,l.up)("v-button"),m=(0,l.up)("v-form");return(0,l.wg)(),(0,l.j4)(m,{initialValues:e.initialValues,onSubmit:e.onSubmit},{fields:(0,l.w5)((({values:t})=>[(0,l._)("div",s,[(0,l.Wm)(u,{shadow:"",label:"Назва точки/відділення*:"},{default:(0,l.w5)((()=>[(0,l.Wm)(d,{name:"name",placeholder:"Введіть назву вашої точки/відділення",modelValue:t.name,"onUpdate:modelValue":e=>t.name=e},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1024),(0,l.Wm)(u,{shadow:"",label:"Місто розташування*:"},{default:(0,l.w5)((()=>[(0,l.Wm)(c,{modelValue:t.city,"onUpdate:modelValue":e=>t.city=e,name:"name",options:e.options,"has-search":!1,inputPlaceholder:"Оберіть місто розташування вашої точки/відділення ",searchPlaceholder:"Місто"},null,8,["modelValue","onUpdate:modelValue","options"])])),_:2},1024),(0,l.Wm)(u,{shadow:"",label:"Адреса точки/відділення*:"},{default:(0,l.w5)((()=>[(0,l.Wm)(d,{modelValue:t.address,"onUpdate:modelValue":e=>t.address=e,name:"name",placeholder:"Введіть адресу вашої точки/відділення "},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1024),(0,l.Wm)(u,{shadow:"",label:"Директор точки/відділення*:"},{default:(0,l.w5)((()=>[(0,l.Wm)(c,{modelValue:t.director,"onUpdate:modelValue":e=>t.director=e,name:"name",inputPlaceholder:"Оберіть дректора",searchPlaceholder:"Пошук директора","has-search":!1,options:e.withOptions},null,8,["modelValue","onUpdate:modelValue","options"])])),_:2},1024),(0,l.Wm)(u,{shadow:"",label:"Контактний номер директора точки/відділення*:"},{default:(0,l.w5)((()=>[(0,l.Wm)(d,{name:"name",placeholder:"Введіть номер директора ",modelValue:t.dir_phone,"onUpdate:modelValue":e=>t.dir_phone=e},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1024)]),(0,l._)("div",i,[(0,l.Wm)(p,{type:"submit"},{text:(0,l.w5)((()=>[(0,l.Uk)("Додати")])),_:1})])])),_:1},8,["initialValues","onSubmit"])}var o=a(6931),r=a(4560),d=a(2619),u=a(2946),c=a(4610),p=(0,l.aZ)({components:{InputField:d.Z,FormField:r.Z,SelectField:u.Z,VForm:o.Z,VButton:c.Z},data(){return{initialValues:{name:"",city:"",address:"",director:"",dir_phone:"",isFiscal:!1},options:[{label:"Option1",value:"Value1"},{label:"Option2",value:"Value2"},{label:"Option3",value:"Value3"}],withOptions:[{label:"Option1",value:"Value1",icon:a(8308)},{label:"Option2",value:"Value2"},{label:"Option3",value:"Value3",icon:a(8308)}]}},methods:{onSubmit(e){console.log(e)}}}),m=a(89);const f=(0,m.Z)(p,[["render",n]]);var h=f}}]);
//# sourceMappingURL=7173.691fc1fc.js.map